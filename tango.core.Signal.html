<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>tango.core.Signal</title>
  <link href="css/style.css" rel="stylesheet" type="text/css"/>
  <!-- no favicon -->
  <script type="text/javascript" src="js/jquery.js"></script>
  <script type="text/javascript" src="js/utilities.js"></script>
  <script type="text/javascript" src="js/symbols.js"></script>
  <script type="text/javascript" src="js/modules.js"></script>
  <script type="text/javascript" src="js/quicksearch.js"></script>
  <script type="text/javascript" src="js/treeview.js"></script>
  <script type="text/javascript" src="js/navigation.js"></script>
</head>
<body id="tango.core.Signal">
<div id="kandil-content">
<div class="module">
  <h1 class="module" id="m-tango.core.Signal"><a href="htmlsrc/tango.core.Signal.html" class="symbol">tango.core.Signal</a></h1>

<div class="summary"><div class="cmnt">The signal module provides a basic implementation of the listener pattern
 using the "Signals and Slots" model from Qt.</div></div>
<p class="sec_header">License:</p><div class="cmnt">BSD style: see <a href="http://www.dsource.org/projects/tango/wiki/LibraryLicense">license.txt</a></div>
<p class="sec_header">Author:</p><div class="cmnt">Sean Kelly</div>
<dl>
<dt class="decl"><span class="kw">struct</span> <a class="symbol _struct" name="Signal" href="htmlsrc/tango.core.Signal.html#L50">Signal</a><span class="tparams">(<em>Args</em>...)</span> <a href="tango.core.Signal.html#Signal" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">A signal is an event which contains a collection of listeners (called
 slots).  When a signal is called, that call will be propagated to each
 attached slot in a synchronous manner.  It is legal for a slot to call a
 signal's attach and detach methods when it is signaled.  When this occurs,
 attach events will be queued and processed after the signal has propagated
 to all slots, but detach events are processed immediately.  This ensures
 that it is safe for slots to be deleted at any time, even within a slot
 routine.</div></div>
<p class="sec_header">Example:</p><div class="cmnt"><table class="d_code">
  <tr><td class="d_codelines">
<pre><a href="#L1_ex1" name="L1_ex1">1</a>
<a href="#L2_ex1" name="L2_ex1">2</a>
<a href="#L3_ex1" name="L3_ex1">3</a>
<a href="#L4_ex1" name="L4_ex1">4</a>
<a href="#L5_ex1" name="L5_ex1">5</a>
<a href="#L6_ex1" name="L6_ex1">6</a>
<a href="#L7_ex1" name="L7_ex1">7</a>
<a href="#L8_ex1" name="L8_ex1">8</a>
<a href="#L9_ex1" name="L9_ex1">9</a>
<a href="#L10_ex1" name="L10_ex1">10</a>
<a href="#L11_ex1" name="L11_ex1">11</a>
<a href="#L12_ex1" name="L12_ex1">12</a>
<a href="#L13_ex1" name="L13_ex1">13</a>
<a href="#L14_ex1" name="L14_ex1">14</a>
</pre></td><td class="d_codetext"><pre>
<span class="k">class</span> <span class="i">Button</span>
{
    <span class="i">Signal</span>!(<span class="i">Button</span>) <span class="i">press</span>;
}

<span class="k">void</span> <span class="i">wasPressed</span>( <span class="i">Button</span> <span class="i">b</span> )
{
    <span class="i">printf</span>( <span class="sl">"Button was pressed.<span class="es">\n</span>"</span> );
}

<span class="i">Button</span> <span class="i">b</span> = <span class="k">new</span> <span class="i">Button</span>;

<span class="i">b</span>.<span class="i">press</span>.<span class="i">attach</span>( &amp;<span class="i">wasPressed</span> );
<span class="i">b</span>.<span class="i">press</span>( <span class="i">b</span> );</pre>
</td></tr>
</table>
<p class="bl"></p>
 Please note that this implementation does not use weak pointers to store
 references to slots.  This design was chosen because weak pointers are
 inherently unsafe when combined with non-deterministic destruction, with
 many of the same limitations as destructors in the same situation.  It is
 still possible to obtain weak-pointer behavior, but this must be done
 through a proxy object instead.</div>
<dl>
<dt class="decl"><span class="kw">alias</span> void delegate(Args) <a class="symbol _alias" name="Signal.SlotDg" href="htmlsrc/tango.core.Signal.html#L52">SlotDg</a> <a href="tango.core.Signal.html#Signal.SlotDg" class="plink">¶</a></dt>
<dd class="ddef"></dd>
<dt class="decl"><span class="kw">alias</span> void function(Args) <a class="symbol _alias" name="Signal.SlotFn" href="htmlsrc/tango.core.Signal.html#L53">SlotFn</a> <a href="tango.core.Signal.html#Signal.SlotFn" class="plink">¶</a></dt>
<dd class="ddef"></dd>
<dt class="decl"><span class="kw">alias</span> opCall <a class="symbol _alias" name="Signal.call" href="htmlsrc/tango.core.Signal.html#L55">call</a> <a href="tango.core.Signal.html#Signal.call" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Alias to simplify chained calling.</div></div></dd>
<dt class="decl"><span class="rettyp">void</span> <a class="symbol _function" name="Signal.opCall" href="htmlsrc/tango.core.Signal.html#L64">opCall</a><span class="params">(Args <em>args</em>)</span> <a href="tango.core.Signal.html#Signal.opCall" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">The signal procedure.  When called, each of the attached slots will be
 called synchronously.</div></div>
<p class="sec_header">Parameters:</p>
<table class="params">
<tr><td><em>args</em></td><td>The signal arguments.</td></tr></table></dd>
<dt class="decl"><span class="rettyp">void</span> <a class="symbol _function" name="Signal.attach" href="htmlsrc/tango.core.Signal.html#L98">attach</a><span class="params">(SlotDg <em>dg</em>)</span> <a href="tango.core.Signal.html#Signal.attach" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Attaches a delegate to this signal.  A delegate may be either attached
 or detached, so successive calls to attach for the same delegate will
 have no effect.</div></div>
<p class="sec_header">Parameters:</p>
<table class="params">
<tr><td><em>dg</em></td><td>The delegate to attach.</td></tr></table></dd>
<dt class="decl"><span class="rettyp">void</span> <a class="symbol _function" name="Signal.attach:2" href="htmlsrc/tango.core.Signal.html#L123">attach</a><span class="params">(SlotFn <em>fn</em>)</span> <a href="tango.core.Signal.html#Signal.attach:2" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Attaches a function to this signal.  A function may be either attached
 or detached, so successive calls to attach for the same function will
 have no effect.</div></div>
<p class="sec_header">Parameters:</p>
<table class="params">
<tr><td><em>fn</em></td><td>The function to attach.</td></tr></table></dd>
<dt class="decl"><span class="rettyp">void</span> <a class="symbol _function" name="Signal.detach" href="htmlsrc/tango.core.Signal.html#L146">detach</a><span class="params">(SlotDg <em>dg</em>)</span> <a href="tango.core.Signal.html#Signal.detach" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Detaches a delegate from this signal.</div></div>
<p class="sec_header">Parameters:</p>
<table class="params">
<tr><td><em>dg</em></td><td>The delegate to detach.</td></tr></table></dd>
<dt class="decl"><span class="rettyp">void</span> <a class="symbol _function" name="Signal.detach:2" href="htmlsrc/tango.core.Signal.html#L162">detach</a><span class="params">(SlotFn <em>fn</em>)</span> <a href="tango.core.Signal.html#Signal.detach:2" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Detaches a function from this signal.</div></div>
<p class="sec_header">Parameters:</p>
<table class="params">
<tr><td><em>fn</em></td><td>The function to detach.</td></tr></table></dd></dl></dd></dl>
</div>
<div id="kandil-footer">
  <p>Copyright (C) 2005-2006 Sean Kelly.  All rights reserved.</p>
  <p>Page generated by <a href="http://code.google.com/p/dil">dil</a> on Mon Mar 12 22:46:07 2012. Rendered by <a href="http://code.google.com/p/dil/wiki/Kandil">kandil</a>.</p>
</div>
</div>
</body>
</html>