<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>tango.io.stream.Iterator</title>
  <link href="css/style.css" rel="stylesheet" type="text/css"/>
  <!-- no favicon -->
  <script type="text/javascript" src="js/jquery.js"></script>
  <script type="text/javascript" src="js/utilities.js"></script>
  <script type="text/javascript" src="js/symbols.js"></script>
  <script type="text/javascript" src="js/modules.js"></script>
  <script type="text/javascript" src="js/quicksearch.js"></script>
  <script type="text/javascript" src="js/treeview.js"></script>
  <script type="text/javascript" src="js/navigation.js"></script>
</head>
<body id="tango.io.stream.Iterator">
<div id="kandil-content">
<div class="module">
  <h1 class="module" id="m-tango.io.stream.Iterator"><a href="htmlsrc/tango.io.stream.Iterator.html" class="symbol">tango.io.stream.Iterator</a></h1>

<p class="sec_header">License:</p><div class="cmnt">BSD style: see <a href="http://www.dsource.org/projects/tango/wiki/LibraryLicense">license.txt</a></div>
<p class="sec_header">Version:</p><div class="cmnt">Initial release: December 2005</div>
<p class="sec_header">Author:</p><div class="cmnt">Kris</div>
<dl>
<dt class="decl"><span class="kw">class</span> <a class="symbol _class" name="Iterator" href="htmlsrc/tango.io.stream.Iterator.html#L52">Iterator</a><span class="tparams">(<em>T</em>)</span> : <span class="bclass">InputFilter</span> <a href="tango.io.stream.Iterator.html#Iterator" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">The base class for a set of stream iterators. These operate
        upon a buffered input stream, and are designed to deal with
        partial content. That is, stream iterators go to work the
        moment any data becomes available in the buffer. Contrast
        this behaviour with the tango.text.Util iterators, which
        operate upon the extent of an array.</div></div>
<div class="cmnt">There are two types of iterators supported; exclusive and
        inclusive. The former are the more common kind, where a token
        is delimited by elements that are considered foreign. Examples
        include space, comma, and end-of-line delineation. Inclusive
        tokens are just the opposite: they look for patterns in the
        text that should be part of the token itself - everything else
        is considered foreign. Currently tango.io.stream includes the
        exclusive variety only.
<p class="bl"></p>
        Each pattern is exposed to the client as a slice of the original
        content, where the slice is transient. If you need to retain the
        exposed content, then you should .dup it appropriately.
<p class="bl"></p>
        The content provided to these iterators is intended to be fully
        read-only. All current tokenizers abide by this rule, but it is
        possible a user could mutate the content through a token slice.
        To enforce the desired read-only aspect, the code would have to
        introduce redundant copying or the compiler would have to support
        read-only arrays (now in D2).
<p class="bl"></p>
        See Delimiters, Lines, Patterns, Quotes.</div>
<dl>
<dt class="decl"><span class="rettyp">size_t</span> <a class="symbol _function" name="Iterator.scan" href="htmlsrc/tango.io.stream.Iterator.html#L64">scan</a><span class="params">(const(void)[] <em>data</em>)</span> <span class="attrs">[<span class="prot">protected</span>, <span class="stc">abstract</span>]</span> <a href="tango.io.stream.Iterator.html#Iterator.scan" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">The pattern scanner, implemented via subclasses.</div></div></dd>
<dt class="decl"><a class="symbol _ctor" name="Iterator.this" href="htmlsrc/tango.io.stream.Iterator.html#L72">this</a><span class="params">(InputStream <em>stream</em> = <span class="defval"><span class="k">null</span></span>)</span> <a href="tango.io.stream.Iterator.html#Iterator.this" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Instantiate with a buffer.</div></div></dd>
<dt class="decl"><span class="rettyp">Iterator</span> <a class="symbol _function" name="Iterator.set" href="htmlsrc/tango.io.stream.Iterator.html#L85">set</a><span class="params">(InputStream <em>stream</em>)</span> <a href="tango.io.stream.Iterator.html#Iterator.set" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Set the provided stream as the scanning source.</div></div></dd>
<dt class="decl"><span class="rettyp">const(T)[]</span> <a class="symbol _function" name="Iterator.get" href="htmlsrc/tango.io.stream.Iterator.html#L99">get</a><span class="params">()</span> <span class="attrs">[<span class="stc">final</span>]</span> <a href="tango.io.stream.Iterator.html#Iterator.get" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Return the current token as a slice of the content.</div></div></dd>
<dt class="decl"><span class="rettyp">int</span> <a class="symbol _function" name="Iterator.opApply" href="htmlsrc/tango.io.stream.Iterator.html#L112">opApply</a><span class="params">(<span class="k">scope</span> int delegate(ref const(T)[]) <em>dg</em>)</span> <a href="tango.io.stream.Iterator.html#Iterator.opApply" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Iterate over the set of tokens. This should really
                provide read-only access to the tokens, but D does
                not support that at this time.</div></div></dd>
<dt class="decl"><span class="rettyp">int</span> <a class="symbol _function" name="Iterator.opApply:2" href="htmlsrc/tango.io.stream.Iterator.html#L131">opApply</a><span class="params">(<span class="k">scope</span> int delegate(ref int, ref const(T)[]) <em>dg</em>)</span> <a href="tango.io.stream.Iterator.html#Iterator.opApply:2" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Iterate over a set of tokens, exposing a token count
                starting at zero.</div></div></dd>
<dt class="decl"><span class="rettyp">int</span> <a class="symbol _function" name="Iterator.opApply:3" href="htmlsrc/tango.io.stream.Iterator.html#L152">opApply</a><span class="params">(<span class="k">scope</span> int delegate(ref int, ref const(T)[], ref const(T)[]) <em>dg</em>)</span> <a href="tango.io.stream.Iterator.html#Iterator.opApply:3" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Iterate over a set of tokens and delimiters, exposing a
                token count starting at zero.</div></div></dd>
<dt class="decl"><span class="rettyp">const(T)[]</span> <a class="symbol _function" name="Iterator.next" href="htmlsrc/tango.io.stream.Iterator.html#L193">next</a><span class="params">()</span> <span class="attrs">[<span class="stc">@property</span>, <span class="stc">final</span>]</span> <a href="tango.io.stream.Iterator.html#Iterator.next" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Locate the next token. Returns the token if found, null
                otherwise. Null indicates an end of stream condition. To
                sweep a conduit for lines using method next():
                <table class="d_code">
  <tr><td class="d_codelines">
<pre><a href="#L1_ex1" name="L1_ex1">1</a>
<a href="#L2_ex1" name="L2_ex1">2</a>
<a href="#L3_ex1" name="L3_ex1">3</a>
</pre></td><td class="d_codetext"><pre>
<span class="k">auto</span> <span class="i">lines</span> = <span class="k">new</span> <span class="i">Lines</span>!(<span class="k">char</span>) (<span class="k">new</span> <span class="i">File</span>(<span class="sl">"myfile"</span>));
<span class="k">while</span> (<span class="i">lines</span>.<span class="i">next</span>)
       <span class="i">Cout</span> (<span class="i">lines</span>.<span class="i">get</span>).<span class="i">newline</span>;</pre>
</td></tr>
</table></div></div>
<div class="cmnt">Alternatively, we can extract one line from a conduit:
                <table class="d_code">
  <tr><td class="d_codelines">
<pre><a href="#L1_ex2" name="L1_ex2">1</a>
</pre></td><td class="d_codetext"><pre>
<span class="k">auto</span> <span class="i">line</span> = (<span class="k">new</span> <span class="i">Lines</span>!(<span class="k">char</span>) (<span class="k">new</span> <span class="i">File</span>(<span class="sl">"myfile"</span>))).<span class="i">next</span>;</pre>
</td></tr>
</table>
<p class="bl"></p>
                The difference between next() and foreach() is that the
                latter processes all tokens in one go, whereas the former
                processes in a piecemeal fashion. To wit:
                <table class="d_code">
  <tr><td class="d_codelines">
<pre><a href="#L1_ex3" name="L1_ex3">1</a>
<a href="#L2_ex3" name="L2_ex3">2</a>
</pre></td><td class="d_codetext"><pre>
<span class="k">foreach</span> (<span class="i">line</span>; <span class="k">new</span> <span class="i">Lines</span>!(<span class="k">char</span>) (<span class="k">new</span> <span class="i">File</span>(<span class="sl">"myfile"</span>)))
         <span class="i">Cout</span>(<span class="i">line</span>).<span class="i">newline</span>;</pre>
</td></tr>
</table></div></dd>
<dt class="decl"><span class="rettyp">size_t</span> <a class="symbol _function" name="Iterator.set:2" href="htmlsrc/tango.io.stream.Iterator.html#L207">set</a><span class="params">(const(T)* <em>content</em>, size_t <em>start</em>, size_t <em>end</em>)</span> <span class="attrs">[<span class="prot">protected</span>, <span class="stc">final</span>]</span> <a href="tango.io.stream.Iterator.html#Iterator.set:2" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Set the content of the current slice to the provided
                start and end points.</div></div></dd>
<dt class="decl"><span class="rettyp">size_t</span> <a class="symbol _function" name="Iterator.set:3" href="htmlsrc/tango.io.stream.Iterator.html#L221">set</a><span class="params">(const(T)* <em>content</em>, size_t <em>start</em>, size_t <em>end</em>, size_t <em>next</em>)</span> <span class="attrs">[<span class="prot">protected</span>, <span class="stc">final</span>]</span> <a href="tango.io.stream.Iterator.html#Iterator.set:3" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Set the content of the current slice to the provided
                start and end points, and delimiter to the segment
                between end &amp; next (inclusive.)</div></div></dd>
<dt class="decl"><span class="rettyp">size_t</span> <a class="symbol _function" name="Iterator.notFound" href="htmlsrc/tango.io.stream.Iterator.html#L236">notFound</a><span class="params">()</span> <span class="attrs">[<span class="prot">protected</span>, <span class="stc">final</span>]</span> <a href="tango.io.stream.Iterator.html#Iterator.notFound" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Called when a scanner fails to find a matching pattern.
                This may cause more content to be loaded, and a rescan
                initiated.</div></div></dd>
<dt class="decl"><span class="rettyp">size_t</span> <a class="symbol _function" name="Iterator.found" href="htmlsrc/tango.io.stream.Iterator.html#L250">found</a><span class="params">(size_t <em>i</em>)</span> <span class="attrs">[<span class="prot">protected</span>, <span class="stc">final</span>]</span> <a href="tango.io.stream.Iterator.html#Iterator.found" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Invoked when a scanner matches a pattern. The provided
                value should be the index of the last element of the
                matching pattern, which is converted back to a void[]
                index.</div></div></dd>
<dt class="decl"><span class="rettyp">bool</span> <a class="symbol _function" name="Iterator.has" href="htmlsrc/tango.io.stream.Iterator.html#L261">has</a><span class="params">(const(T)[] <em>set</em>, T <em>match</em>)</span> <span class="attrs">[<span class="prot">protected</span>, <span class="stc">final</span>]</span> <a href="tango.io.stream.Iterator.html#Iterator.has" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">See if set of characters holds a particular instance.</div></div></dd></dl></dd></dl>
</div>
<div id="kandil-footer">
  <p>Copyright (c) 2004 Kris Bell. All rights reserved</p>
  <p>Page generated by <a href="http://code.google.com/p/dil">dil</a> on Mon Mar 12 22:46:10 2012. Rendered by <a href="http://code.google.com/p/dil/wiki/Kandil">kandil</a>.</p>
</div>
</div>
</body>
</html>