
<html><head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta content="text/javascript" http-equiv="content-script-type">
<title>tango.core.memory</title>
<link rel="stylesheet" type="text/css" href="candydoc/style.css">
<!--[if lt IE 7]><link rel="stylesheet" type="text/css" href="candydoc/ie56hack.css"><![endif]-->
<script language="JavaScript" src="candydoc/util.js" type="text/javascript"></script>
<script language="JavaScript" src="candydoc/tree.js" type="text/javascript"></script>
<script language="JavaScript" src="candydoc/explorer.js" type="text/javascript"></script>
<script>
function anchorFromTitle(title, path, ext) {
  var url = path + title.substring(title.lastIndexOf('.')+1, title.length) + "." + ext;
  document.write("<a href='" + url + "'>" + title + "</a>");
  }
</script>
</head><body>
<div id="tabarea"></div><div id="explorerclient"></div>
<div id="content"><script>explorer.initialize("tango.core.memory");</script>
	<table class="content">
		<tr><td id="docbody"><h1><script>anchorFromTitle('tango.core.memory', 'http://svn.dsource.org/projects/tango/trunk/doc/html/source/', 'html');</script></h1><!-- Generated by Ddoc from core\memory.d -->
<font color=black>The 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.memory.memory">memory</a></span>
<script>explorer.outline.addDecl('memory');</script>
 module provides an interface to the garbage collector and to
 any other OS or API-level 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.memory.memory">memory</a></span>
<script>explorer.outline.addDecl('memory');</script>
 management facilities.
</font><br><br>
<b>License:</b><br>
BSD style: see <a href="http://www.dsource.org/projects/tango/wiki/LibraryLicense">license.txt</a>
<br><br>
<b>Authors:</b><br>
Sean Kelly
 
<br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl>
<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>struct 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.memory.GC">GC</a></span>
<script>explorer.outline.addDecl('GC');</script>
;
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>This struct encapsulates all garbage collection functionality for the D
 programming language.  Currently, the garbage collector is decided at
 link time, but this design could adapt to dynamic garbage collector
 loading with few semantic changes.
 
</font><br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl>
<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>void 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.memory.enable">enable</a></span>
<script>explorer.outline.addDecl('enable');</script>
();
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Enables the garbage collector if collections have previously been
 suspended by a call to disable.  This function is reentrant, and
 must be called once for every call to disable before the garbage
 collector is enabled.
     
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>void 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.memory.disable">disable</a></span>
<script>explorer.outline.addDecl('disable');</script>
();
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Disables the garbage collector.  This function is reentrant, but
 enable must be called once for each call to 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.memory.disable">disable</a></span>
<script>explorer.outline.addDecl('disable');</script>
.
     
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>void 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.memory.collect">collect</a></span>
<script>explorer.outline.addDecl('collect');</script>
();
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Begins a full collection.  While the meaning of this may change based
 on the garbage collector implementation, typical behavior is to scan
 all stack segments for roots, mark accessible memory blocks as alive,
 and then to reclaim free space.  This action may need to suspend all
 running threads for at least part of the collection process.
     
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>void* 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.memory.malloc">malloc</a></span>
<script>explorer.outline.addDecl('malloc');</script>
(uint <span class="funcparam">sz</span>, bool <span class="funcparam">df</span> = false);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Requests an aligned block of managed memory from the garbage collector.
 This memory may be deleted at will with a call to free, or it may be
 discarded and cleaned up automatically during a collection run.  If
 allocation fails, this function will call onOutOfMemory which is
 expected to throw an OutOfMemoryException.
</font><br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">uint <span class="funcparam">sz</span></td>

               
<td>The desired allocation size in bytes.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">bool <span class="funcparam">df</span></td>

               
<td>True if this memory block should be finalized.</td></tr>
</table><br>
<b>Returns:</b><br>
A reference to the allocated memory or <b>null</b> if insufficient memory
  is available.

<br><br>
<b>Throws:</b><br>
OutOfMemoryException on allocation failure.
     
<br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>void* 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.memory.calloc">calloc</a></span>
<script>explorer.outline.addDecl('calloc');</script>
(uint <span class="funcparam">sz</span>, bool <span class="funcparam">df</span> = false);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Requests an aligned block of managed memory from the garbage collector,
 which is initialized with all bits set to zero.  This memory may be
 deleted at will with a call to free, or it may be discarded and cleaned
 up automatically during a collection run.  If allocation fails, this
 function will call onOutOfMemory which is expected to throw an
 OutOfMemoryException.
</font><br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">uint <span class="funcparam">sz</span></td>

               
<td>The desired allocation size in bytes.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">bool <span class="funcparam">df</span></td>

               
<td>True if this memory block should be finalized.</td></tr>
</table><br>
<b>Returns:</b><br>
A reference to the allocated memory or <b>null</b> if insufficient memory
  is available.

<br><br>
<b>Throws:</b><br>
OutOfMemoryException on allocation failure.
     
<br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>void* 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.memory.realloc">realloc</a></span>
<script>explorer.outline.addDecl('realloc');</script>
(void* <span class="funcparam">p</span>, uint <span class="funcparam">sz</span>, bool <span class="funcparam">df</span> = false);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>If <span class="funcparam">sz</span> is zero, the memory referenced by <span class="funcparam">p</span> will be deallocated as if
 by a call to free.  A new memory block of size <span class="funcparam">sz</span> will then be
 allocated as if by a call to malloc, or the implementation may instead
 resize the memory block in place.  The contents of the new memory block
 will be the same as the contents of the old memory block, up to the
 lesser of the new and old sizes.  Note that existing memory will only
 be freed by 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.memory.realloc">realloc</a></span>
<script>explorer.outline.addDecl('realloc');</script>
 if <span class="funcparam">sz</span> is equal to zero.  The garbage collector is
 otherwise expected to later reclaim the memory block if it is unused.
 If allocation fails, this function will call onOutOfMemory which is
 expected to throw an OutOfMemoryException.  If <span class="funcparam">p</span> references memory not
 originally allocated by this garbage collector, or if it points to the
 interior of a memory block, no action will be taken.
</font><br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">void* <span class="funcparam">p</span></td>

               
<td>A pointer to the root of a valid memory block or to <b>null</b>.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">uint <span class="funcparam">sz</span></td>

               
<td>The desired allocation size in bytes.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">bool <span class="funcparam">df</span></td>

               
<td>True if this memory block should be finalized.</td></tr>
</table><br>
<b>Returns:</b><br>
A reference to the allocated memory on success or <b>null</b> if <span class="funcparam">sz</span> is
  zero.  On failure, the original value of <span class="funcparam">p</span> is returned.

<br><br>
<b>Throws:</b><br>
OutOfMemoryException on allocation failure.
     
<br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>void 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.memory.free">free</a></span>
<script>explorer.outline.addDecl('free');</script>
(void* <span class="funcparam">p</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Deallocates the memory references by <span class="funcparam">p</span>.  If <span class="funcparam">p</span> is <b>null</b>, no action
 occurs.  If <span class="funcparam">p</span> references memory not originally allocated by this
 garbage collector, or if it points to the interior of a memory block,
 no action will be taken.
</font><br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">void* <span class="funcparam">p</span></td>

               
<td>A pointer to the root of a valid memory block or to <b>null</b>.</td></tr>
</table><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>uint 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.memory.sizeOf">sizeOf</a></span>
<script>explorer.outline.addDecl('sizeOf');</script>
(void* <span class="funcparam">p</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Determines the allocated size of a memory block, equivalent to
 the length property for arrays.  If <span class="funcparam">p</span> references memory not originally
 allocated by this garbage collector, or if it points to the interior
 of a memory block, zero will be returned.
</font><br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">void* <span class="funcparam">p</span></td>

               
<td>A pointer to the root of a valid memory block or to <b>null</b>.</td></tr>
</table><br>
<b>Returns:</b><br>
The size in bytes of the memory block referenced by <span class="funcparam">p</span> or zero on error.
     
<br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>uint 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.memory.capacityOf">capacityOf</a></span>
<script>explorer.outline.addDecl('capacityOf');</script>
(void* <span class="funcparam">p</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Determines the free space including and immediately following the memory
 block referenced by <span class="funcparam">p</span>.  If <span class="funcparam">p</span> references memory not originally allocated
 by this garbage collector, or if it points to the interior of a memory
 block, zero will be returned.  The purpose of this function is to provide
 a means to determine the maximum number of bytes for which a call to
 realloc may resize the existing block in place.
</font><br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">void* <span class="funcparam">p</span></td>

               
<td>A pointer to the root of a valid memory block or to <b>null</b>.</td></tr>
</table><br>
<b>Returns:</b><br>
The size in bytes of the memory block referenced by <span class="funcparam">p</span> or zero on error.
     
<br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>void 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.memory.add">add</a></span>
<script>explorer.outline.addDecl('add');</script>
(void* <span class="funcparam">p</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Adds the memory block referenced by <span class="funcparam">p</span> to an internal list of roots to
 be scanned during a collection.  If <span class="funcparam">p</span> is <b>null</b>, no operation is
 performed.
</font><br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">void* <span class="funcparam">p</span></td>

               
<td>A pointer to the root of a valid memory block or to <b>null</b>.</td></tr>
</table><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>void 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.memory.add">add</a></span>
<script>explorer.outline.addDecl('add');</script>
(void* <span class="funcparam">pbeg</span>, void* <span class="funcparam">pend</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Adds the memory range beginning with <span class="funcparam">pbeg</span> and ending immediately
 before <span class="funcparam">pend</span> to to an internal list of memory blocks to be scanned
 during a collection.  If <span class="funcparam">pbeg</span> and <span class="funcparam">pend</span> are <b>null</b>, no operation is
 performed.
</font><br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">void* <span class="funcparam">pbeg</span></td>

               
<td>A pointer to the a valid memory location or to <b>null</b>.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">void* <span class="funcparam">pend</span></td>

               
<td>A pointer to one past the end of a valid memory block,
         or <b>null</b> if <span class="funcparam">pbeg</span> is <b>null</b>.</td></tr>
</table><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>void 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.memory.remove">remove</a></span>
<script>explorer.outline.addDecl('remove');</script>
(void* <span class="funcparam">p</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Removes the memory block referenced by <span class="funcparam">p</span> from an internal list of roots
 to be scanned during a collection.  If <span class="funcparam">p</span> is <b>null</b>, no operation is
 performed.
</font><br><br>
<font color=black><span class="funcparam">p</span> = A pointer to the root of a valid memory block or to <b>null</b>.
     
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>void 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.memory.remove">remove</a></span>
<script>explorer.outline.addDecl('remove');</script>
(void* <span class="funcparam">pbeg</span>, void* <span class="funcparam">pend</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Removes the memory block range beginning with <span class="funcparam">pbeg</span> and ending
 immediately before <span class="funcparam">pend</span> from an internal list of roots to be
 scanned during a collection.  If <span class="funcparam">pbeg</span> and <span class="funcparam">pend</span> were not previously
 passed to the garbage collector by a call to add, the result is
 undefined.  If <span class="funcparam">pbeg</span> and <span class="funcparam">pend</span> are <b>null</b>, no operation is performed.
</font><br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">void* <span class="funcparam">pbeg</span></td>

               
<td>A pointer to the a valid memory location or to <b>null</b>.</td></tr>
<tr>
<td nowrap valign="top" style="padding-right: 8px">void* <span class="funcparam">pend</span></td>

               
<td>A pointer to one past the end of a valid memory block,
         or <b>null</b> if <span class="funcparam">pbeg</span> is <b>null</b>.</td></tr>
</table><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>void 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.memory.pin">pin</a></span>
<script>explorer.outline.addDecl('pin');</script>
(void* <span class="funcparam">p</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Ensures that the memory referenced by <span class="funcparam">p</span> will not be moved by the
 garbage collector.  This function is reentrant, but unpin must be
 called once for each call to 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.memory.pin">pin</a></span>
<script>explorer.outline.addDecl('pin');</script>
.  If <span class="funcparam">p</span> is <b>null</b>, no operation is
 performed.
</font><br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">void* <span class="funcparam">p</span></td>

               
<td>A pointer to the root of a valid memory block or to <b>null</b>.</td></tr>
</table><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>void 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.memory.unpin">unpin</a></span>
<script>explorer.outline.addDecl('unpin');</script>
(void* <span class="funcparam">p</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Allows the garbage collector to move the memory block referenced
 by <span class="funcparam">p</span> during a collection, if pin has previously been called with
 the supplied value of <span class="funcparam">p</span> as a parameter.  This function is reentrant,
 and must be called once for every call to pin before the garbage
 collector is free to move this block.
</font><br><br>
<b>Params:</b><br>
<table><tr>
<td nowrap valign="top" style="padding-right: 8px">void* <span class="funcparam">p</span></td>

               
<td>A pointer to the root of a valid memory block or to <b>null</b>.</td></tr>
</table><br>

</dd>

</dl>
<script>explorer.outline.decSymbolLevel();</script>


</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>GC 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.memory.gc">gc</a></span>
<script>explorer.outline.addDecl('gc');</script>
;
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>All GC routines are accessed through this variable.  This is done to
 follow the established D coding style guidelines and to reduce the
 impact of future design changes.
 
</font><br><br>

</dd>

</dl>
<script>explorer.outline.decSymbolLevel();</script>


</td></tr>
		<tr><td id="docfooter">
                        Copyright (C) 2005-2006 Sean Kelly.  All rights reserved.
 :: page rendered by CandyDoc
		</td></tr>
	</table>
</div>
<script></script>
</body></html>


