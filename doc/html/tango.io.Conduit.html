
<html><head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta content="text/javascript" http-equiv="content-script-type">
<title>tango.io.Conduit</title>
<link rel="stylesheet" type="text/css" href="candydoc/style.css">
<!--[if lt IE 7]><link rel="stylesheet" type="text/css" href="candydoc/ie56hack.css"><![endif]-->
<script language="JavaScript" src="candydoc/util.js" type="text/javascript"></script>
<script language="JavaScript" src="candydoc/tree.js" type="text/javascript"></script>
<script language="JavaScript" src="candydoc/explorer.js" type="text/javascript"></script>
<script>
function anchorFromTitle(title, path, ext) {
  var url = path + title + "." + ext;
  document.write("<a href='" + url + "'>" + title + "</a>");
  }
</script>
</head><body>
<div id="tabarea"></div><div id="explorerclient"></div>
<div id="content"><script>explorer.initialize("tango.io.Conduit");</script>
	<table class="content">
		<tr><td id="docbody"><h1><script>anchorFromTitle('tango.io.Conduit', 'http://svn.dsource.org/projects/tango/trunk/doc/html/source/', 'html');</script></h1><!-- Generated by Ddoc from tango\io\Conduit.d -->
<b>License:</b><br>
BSD style: see <a href="http://www.dsource.org/projects/tango/wiki/LibraryLicense">license.txt</a>

<br><br>
<b>Version:</b><br>
Initial release: March 2004

<br><br>
<b>author:</b><br>
Kris

<br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl>
<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>class 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.Conduit">Conduit</a></span>
<script>explorer.outline.addDecl('Conduit');</script>
: tango.io.model.IConduit.IConduit, tango.io.model.IConduit.IConduitFilter;
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.Conduit">Conduit</a></span>
<script>explorer.outline.addDecl('Conduit');</script>
 abstract base-class, implementing interface IConduit.
        Only the conduit-specific read, write, and buffer-factory
        need to be implemented for a concrete conduit implementation.
        See FileConduit for an example.
</font><br><br>
<font color=black>Conduits provide virtualized access to external content, and
        represent things like files or Internet connections. Conduits
        are modelled by tango.io.model.IConduit, and implemented via
        classes FileConduit and SocketConduit.
<br><br>

        Additional kinds of conduit are easy to construct: one either
        subclasses tango.io.
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.Conduit">Conduit</a></span>
<script>explorer.outline.addDecl('Conduit');</script>
, or implements tango.io.model.IConduit.
        A conduit typically reads and writes from/to an IBuffer in large
        chunks, typically the entire buffer. Alternatively, one can invoke
        read(dst[]) and/or write(src[]) directly.

</font><br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl>
<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>abstract uint 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.bufferSize">bufferSize</a></span>
<script>explorer.outline.addDecl('bufferSize');</script>
();
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Return a preferred size for buffering conduit I/O
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>protected abstract uint 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.reader">reader</a></span>
<script>explorer.outline.addDecl('reader');</script>
(void[] <span class="funcparam">dst</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>conduit-specific 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.reader">reader</a></span>
<script>explorer.outline.addDecl('reader');</script>

</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>protected abstract uint 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.writer">writer</a></span>
<script>explorer.outline.addDecl('writer');</script>
(void[] <span class="funcparam">src</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>conduit-specific 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.writer">writer</a></span>
<script>explorer.outline.addDecl('writer');</script>

</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>this(Access <span class="funcparam">access</span>, bool <span class="funcparam">seekable</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Construct a conduit with the given style and seek abilities.
                Conduits are either <span class="funcparam">seekable</span> or non-<span class="funcparam">seekable</span>.
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>void 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.close">close</a></span>
<script>explorer.outline.addDecl('close');</script>
();
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Method to 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.close">close</a></span>
<script>explorer.outline.addDecl('close');</script>
 the filters. This is invoked from the
                Resource base-class when the resource is being closed.
                You should ensure that a subclass invokes this as part
                of its closure mechanics.
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>bool 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.flush">flush</a></span>
<script>explorer.outline.addDecl('flush');</script>
(void[] <span class="funcparam">src</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.flush">flush</a></span>
<script>explorer.outline.addDecl('flush');</script>
 provided content to the conduit
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>void 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.attach">attach</a></span>
<script>explorer.outline.addDecl('attach');</script>
(IConduitFilter <span class="funcparam">filter</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Please refer to IConduit.
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.attach">attach</a></span>
<script>explorer.outline.addDecl('attach');</script>
 for details
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>protected void 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.bind">bind</a></span>
<script>explorer.outline.addDecl('bind');</script>
(IConduit <span class="funcparam">conduit</span>, IConduitFilter <span class="funcparam">next</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><br><br>
</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>protected void 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.unbind">unbind</a></span>
<script>explorer.outline.addDecl('unbind');</script>
();
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><br><br>
</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>uint 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.read">read</a></span>
<script>explorer.outline.addDecl('read');</script>
(void[] <span class="funcparam">dst</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.read">read</a></span>
<script>explorer.outline.addDecl('read');</script>
 from conduit into a target buffer
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>uint 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.write">write</a></span>
<script>explorer.outline.addDecl('write');</script>
(void[] <span class="funcparam">src</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.write">write</a></span>
<script>explorer.outline.addDecl('write');</script>
 to conduit from a source buffer
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>bool 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.isSeekable">isSeekable</a></span>
<script>explorer.outline.addDecl('isSeekable');</script>
();
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Returns <b>true</b> if this conduit is seekable (whether it
                implements ISeekable)
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>bool 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.isReadable">isReadable</a></span>
<script>explorer.outline.addDecl('isReadable');</script>
();
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Returns <b>true</b> is this conduit can be read from
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>bool 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.isWritable">isWritable</a></span>
<script>explorer.outline.addDecl('isWritable');</script>
();
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Returns <b>true</b> if this conduit can be written to
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>bool 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.isTextual">isTextual</a></span>
<script>explorer.outline.addDecl('isTextual');</script>
();
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Returns <b>true</b> if this conduit is text-based
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>IConduit 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.copy">copy</a></span>
<script>explorer.outline.addDecl('copy');</script>
(IConduit <span class="funcparam">source</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Transfer the content of another conduit to this one. Returns
                a reference to this class, and throws IOException on failure.
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>uint 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.fill">fill</a></span>
<script>explorer.outline.addDecl('fill');</script>
(void[] <span class="funcparam">dst</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Fill the provided buffer. Returns the number of bytes
                actually read, which will be less that <span class="funcparam">dst</span>.length when
                Eof has been reached and zero thereafter
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>Access 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.getAccess">getAccess</a></span>
<script>explorer.outline.addDecl('getAccess');</script>
();
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Return the access-style used when creating this conduit
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>static bool 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.isHalting">isHalting</a></span>
<script>explorer.outline.addDecl('isHalting');</script>
();
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Is the application terminating?
</font><br><br>

</dd>

</dl>
<script>explorer.outline.decSymbolLevel();</script>


</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>class 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.ConduitFilter">ConduitFilter</a></span>
<script>explorer.outline.addDecl('ConduitFilter');</script>
: tango.io.model.IConduit.IConduitFilter;
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Define a conduit filter base-class. The filter is invoked
        via its reader() method whenever a block of content is
        being read, and by its writer() method whenever content is
        being written.
</font><br><br>
<font color=black>The filter should return the number of bytes it has actually
</font><br><br>
<b>produced:</b><br>
less than or equal to the length of the provided
        array.
<br><br>

        Filters are chained together such that the last filter added
        is the first one invoked. It is the responsibility of each
        filter to invoke the next link in the chain; for example:
<br><br>

<pre class="d_code">        <font color=blue>class</font> MungingFilter : ConduitFilter
        {
                <font color=blue>int</font> reader (<font color=blue>void</font>[] dst)
                {
                        <font color=grey>// read the next X bytes
</font>                        <font color=blue>int</font> count = next.reader (dst);

                        <font color=grey>// set everything to '*' !
</font>                        dst[0..count] = '*';

                        <font color=grey>// say how many we read
</font>                        <font color=blue>return</font> count;
                }

                <font color=blue>int</font> writer (<font color=blue>void</font>[] src)
                {
                        <font color=blue>byte</font>[] tmp = <font color=blue>new</font> <font color=blue>byte</font>[src.length];

                        <font color=grey>// set everything to '*'
</font>                        tmp = '*';

                        <font color=grey>// write the munged output
</font>                        <font color=blue>return</font> next.writer (tmp);
                }
        }
</pre>

        Notice how this filter invokes the 'next' instance before
        munging the content ... the far end of the chain is where
        the original IConduit reader is attached, so it will get
        invoked eventually assuming each filter invokes 'next'.
        If the next reader fails it will return IConduit.Eof, as
        should your filter (or throw an IOException). From a client
        perspective, filters are attached like this:
<br><br>

<pre class="d_code">        FileConduit fc = <font color=blue>new</font> FileConduit (...);

        fc.attach (<font color=blue>new</font> ZipFilter);
        fc.attach (<font color=blue>new</font> MungingFilter);
</pre>

        Again, the last filter attached is the first one invoked
        when a block of content is actually read. Each filter has
        two additional methods that it may use to control behavior:
<br><br>

<pre class="d_code">        <font color=blue>class</font> ConduitFilter : IConduitFilter
        {
                <font color=blue>protected</font> IConduitFilter next;

                <font color=blue>void</font> bind (IConduit conduit, IConduitFilter next)
                {
                        <font color=blue>this</font>.next = next;
                }

                <font color=blue>void</font> unbind ()
                {
                }
        }
</pre>

        The first method is invoked when the filter is attached to a
        conduit, while the second is invoked just before the conduit
        is closed. Both of these may be overridden by the filter for
        whatever purpose desired.
<br><br>

        Note that a conduit filter can choose to sidestep reading from
        the conduit (per the usual case), and produce its input from
        somewhere else entirely. This mechanism supports the notion
        of 'piping' between multiple conduits, or between a conduit
        and something else entirely; it's a bridging mechanism.
<br><br>


<br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl>
<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>uint 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.reader">reader</a></span>
<script>explorer.outline.addDecl('reader');</script>
(void[] <span class="funcparam">dst</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><br><br>
</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>uint 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.writer">writer</a></span>
<script>explorer.outline.addDecl('writer');</script>
(void[] <span class="funcparam">src</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><br><br>
</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>protected void 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.bind">bind</a></span>
<script>explorer.outline.addDecl('bind');</script>
(IConduit <span class="funcparam">conduit</span>, IConduitFilter <span class="funcparam">next</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><br><br>
</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>protected void 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.unbind">unbind</a></span>
<script>explorer.outline.addDecl('unbind');</script>
();
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><br><br>
</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>protected final void 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.io.Conduit.error">error</a></span>
<script>explorer.outline.addDecl('error');</script>
(char[] <span class="funcparam">msg</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><br><br>
</dd>

</dl>
<script>explorer.outline.decSymbolLevel();</script>


</dd>

</dl>
<script>explorer.outline.decSymbolLevel();</script>


</td></tr>
		<tr><td id="docfooter">
                        Copyright (c) 2004 Kris Bell. All rights reserved

 :: page rendered by CandyDoc
		</td></tr>
	</table>
</div>
<script></script>
</body></html>


