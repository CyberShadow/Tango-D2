
<html><head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta content="text/javascript" http-equiv="content-script-type">
<title>tango.core.unicode</title>
<link rel="stylesheet" type="text/css" href="candydoc/style.css">
<!--[if lt IE 7]><link rel="stylesheet" type="text/css" href="candydoc/ie56hack.css"><![endif]-->
<script language="JavaScript" src="candydoc/util.js" type="text/javascript"></script>
<script language="JavaScript" src="candydoc/tree.js" type="text/javascript"></script>
<script language="JavaScript" src="candydoc/explorer.js" type="text/javascript"></script>
<script>
function anchorFromTitle(title, path, ext) {
  var url = path + title + "." + ext;
  document.write("<a href='" + url + "'>" + title + "</a>");
  }
</script>
</head><body>
<div id="tabarea"></div><div id="explorerclient"></div>
<div id="content"><script>explorer.initialize("tango.core.unicode");</script>
	<table class="content">
		<tr><td id="docbody"><h1><script>anchorFromTitle('tango.core.unicode', 'http://svn.dsource.org/projects/tango/trunk/doc/html/source/', 'html');</script></h1><!-- Generated by Ddoc from tango\core\unicode.d -->
<font color=black>Fast Unicode transcoders. These are particularly sensitive to
        minor changes on 32bit x86 devices, because the register set of
        those devices is so small. Beware of subtle changes which might
        extend the execution-period by as much as 200%. Because of this,
        three of the six transcoders might read past the end of input by
        one, two, or three bytes before arresting themselves. Note that
        support for streaming adds a 15% overhead to the dchar =&gt; char
        conversion, but has little effect on the others.
</font><br><br>
<font color=black>These routines were tuned on an Intel P4; other devices may work
        more efficiently with a slightly different approach, though this
        is likely to be reasonably optimal on AMD x86 CPUs also. These
        algorithms would benefit significantly from those extra AMD64
        registers. On a 3GHz P4, the dchar/char conversions take around
        2500ns to process an array of 1000 ASCII elements. Invoking the
        memory manager doubles that period, and quadruples the time for
        arrays of 100 elements. Memory allocation can slow down notably
        in a multi-threaded environment, so avoid that where possible.
<br><br>

        Surrogate-pairs are dealt with in a non-optimal fashion when
        transcoding between utf16 and utf8. Such cases are considered
        to be boundary-conditions for this module.
<br><br>

        There are three common cases where the input may be incomplete,
        including each 'widening' case of utf8 =&gt; utf16, utf8 =&gt; utf32,
        and utf16 =&gt; utf32. An edge-case is utf16 =&gt; utf8, if surrogate
        pairs are present. Such cases will throw an exception, unless
        streaming-mode is enabled ~ in the latter mode, an additional
        integer is returned indicating how many elements of the input
        have been consumed. In all cases, a correct slice of the output
        is returned.
<br><br>

        For details on Unicode processing see
        <a href="http://www.utf-8.com/">http://www.utf-8.com/</a>
        <a href="http://www.hackcraft.net/xmlUnicode/">http://www.hackcraft.net/xmlUnicode/</a>
        <a href="http://www.azillionmonkeys.com/qed/
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.unicode.unicode">unicode</a></span>
<script>explorer.outline.addDecl('unicode');</script>
.html/">http://www.azillionmonkeys.com/qed/
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.unicode.unicode">unicode</a></span>
<script>explorer.outline.addDecl('unicode');</script>
.html/</a>
        <a href="http://icu.sourceforge.net/docs/papers/forms_of_unicode/">http://icu.sourceforge.net/docs/papers/forms_of_unicode/</a>

</font><br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl>
<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>char[] 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.unicode.toUtf8">toUtf8</a></span>
<script>explorer.outline.addDecl('toUtf8');</script>
(wchar[] <span class="funcparam">input</span>, char[] <span class="funcparam">output</span> = null, uint* <span class="funcparam">ate</span> = null);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Encode Utf8 up to a maximum of 4 bytes long (five &amp; six byte
        variations are not supported).
</font><br><br>
<font color=black>If the <span class="funcparam">output</span> is provided off the stack, it should be large
        enough to encompass the entire transcoding; failing to do
        so will cause the <span class="funcparam">output</span> to be moved onto the heap instead.
<br><br>

        Returns a slice of the <span class="funcparam">output</span> buffer, corresponding to the
        converted characters. For optimum performance, the returned
        buffer should be specified as '<span class="funcparam">output</span>' on subsequent calls.
        For example:
<br><br>

        char[] <span class="funcparam">output</span>;
<br><br>

        wchar[] result = 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.unicode.toUtf8">toUtf8</a></span>
<script>explorer.outline.addDecl('toUtf8');</script>
 (<span class="funcparam">input</span>, <span class="funcparam">output</span>);
<br><br>

        // reset <span class="funcparam">output</span> after a realloc
        if (result.length &gt; <span class="funcparam">output</span>.length)
            <span class="funcparam">output</span> = result;

</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>wchar[] 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.unicode.toUtf16">toUtf16</a></span>
<script>explorer.outline.addDecl('toUtf16');</script>
(char[] <span class="funcparam">input</span>, wchar[] <span class="funcparam">output</span> = null, uint* <span class="funcparam">ate</span> = null);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Decode Utf8 produced by the above toUtf8() method.
</font><br><br>
<font color=black>If the <span class="funcparam">output</span> is provided off the stack, it should be large
        enough to encompass the entire transcoding; failing to do
        so will cause the <span class="funcparam">output</span> to be moved onto the heap instead.
<br><br>

        Returns a slice of the <span class="funcparam">output</span> buffer, corresponding to the
        converted characters. For optimum performance, the returned
        buffer should be specified as '<span class="funcparam">output</span>' on subsequent calls.

</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>char[] 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.unicode.toUtf8">toUtf8</a></span>
<script>explorer.outline.addDecl('toUtf8');</script>
(dchar[] <span class="funcparam">input</span>, char[] <span class="funcparam">output</span> = null, uint* <span class="funcparam">ate</span> = null);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Encode Utf8 up to a maximum of 4 bytes long (five &amp; six
        byte variations are not supported). Throws an exception
        where the <span class="funcparam">input</span> dchar is greater than 0x10ffff.
</font><br><br>
<font color=black>If the <span class="funcparam">output</span> is provided off the stack, it should be large
        enough to encompass the entire transcoding; failing to do
        so will cause the <span class="funcparam">output</span> to be moved onto the heap instead.
<br><br>

        Returns a slice of the <span class="funcparam">output</span> buffer, corresponding to the
        converted characters. For optimum performance, the returned
        buffer should be specified as '<span class="funcparam">output</span>' on subsequent calls.

</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>dchar[] 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.unicode.toUtf32">toUtf32</a></span>
<script>explorer.outline.addDecl('toUtf32');</script>
(char[] <span class="funcparam">input</span>, dchar[] <span class="funcparam">output</span> = null, uint* <span class="funcparam">ate</span> = null);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Decode Utf8 produced by the above toUtf8() method.
</font><br><br>
<font color=black>If the <span class="funcparam">output</span> is provided off the stack, it should be large
        enough to encompass the entire transcoding; failing to do
        so will cause the <span class="funcparam">output</span> to be moved onto the heap instead.
<br><br>

        Returns a slice of the <span class="funcparam">output</span> buffer, corresponding to the
        converted characters. For optimum performance, the returned
        buffer should be specified as '<span class="funcparam">output</span>' on subsequent calls.

</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>wchar[] 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.unicode.toUtf16">toUtf16</a></span>
<script>explorer.outline.addDecl('toUtf16');</script>
(dchar[] <span class="funcparam">input</span>, wchar[] <span class="funcparam">output</span> = null, uint* <span class="funcparam">ate</span> = null);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Encode Utf16 up to a maximum of 2 bytes long. Throws an exception
        where the <span class="funcparam">input</span> dchar is greater than 0x10ffff.
</font><br><br>
<font color=black>If the <span class="funcparam">output</span> is provided off the stack, it should be large
        enough to encompass the entire transcoding; failing to do
        so will cause the <span class="funcparam">output</span> to be moved onto the heap instead.
<br><br>

        Returns a slice of the <span class="funcparam">output</span> buffer, corresponding to the
        converted characters. For optimum performance, the returned
        buffer should be specified as '<span class="funcparam">output</span>' on subsequent calls.

</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>dchar[] 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.unicode.toUtf32">toUtf32</a></span>
<script>explorer.outline.addDecl('toUtf32');</script>
(wchar[] <span class="funcparam">input</span>, dchar[] <span class="funcparam">output</span> = null, uint* <span class="funcparam">ate</span> = null);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Decode Utf16 produced by the above toUtf16() method.
</font><br><br>
<font color=black>If the <span class="funcparam">output</span> is provided off the stack, it should be large
        enough to encompass the entire transcoding; failing to do
        so will cause the <span class="funcparam">output</span> to be moved onto the heap instead.
<br><br>

        Returns a slice of the <span class="funcparam">output</span> buffer, corresponding to the
        converted characters. For optimum performance, the returned
        buffer should be specified as '<span class="funcparam">output</span>' on subsequent calls.

</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>template 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.unicode.convert">convert</a></span>
<script>explorer.outline.addDecl('convert');</script>
(DstElem,SrcElem)</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><br><br>

<script>explorer.outline.incSymbolLevel();</script>
<dl>
<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>DstElem[] 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.core.unicode.convert">convert</a></span>
<script>explorer.outline.addDecl('convert');</script>
(SrcElem[] <span class="funcparam">x</span>, DstElem[] <span class="funcparam">dst</span> = null, uint* <span class="funcparam">ate</span> = null);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><br><br>
</dd>

</dl>
<script>explorer.outline.decSymbolLevel();</script>


</dd>

</dl>
<script>explorer.outline.decSymbolLevel();</script>


</td></tr>
		<tr><td id="docfooter">
                         :: page rendered by CandyDoc
		</td></tr>
	</table>
</div>
<script></script>
</body></html>


