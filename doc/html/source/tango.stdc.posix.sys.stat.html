<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>
	<head>
		<link rel="stylesheet" href="../../../style.css" type="text/css" />
		<title>stdc/posix/sys/stat.d</title>
	</head>
	<body>

<table id='dcode'><tr><td id='lnum'><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
</pre></td><td id='code'><pre><span class='com'>/**
 * D header file for POSIX.
 *
 * Copyright: Public Domain
 * License:   Public Domain
 * Authors:   Sean Kelly
 * Standards: The Open Group Base Specifications Issue 6, IEEE Std 1003.1, 2004 Edition
 */</span>
<span class='kw2'>module</span> tango.stdc.posix.sys.stat;

<span class='kw4'>private</span> <span class='kw2'>import</span> tango.stdc.config;
<span class='kw4'>private</span> <span class='kw2'>import</span> tango.stdc.stdint;
<span class='kw4'>private</span> <span class='kw2'>import</span> tango.stdc.posix.time;     <span class='com'>// for timespec</span>
<span class='kw4'>public</span> <span class='kw2'>import</span> tango.stdc.stddef;          <span class='com'>// for size_t</span>
<span class='kw4'>public</span> <span class='kw2'>import</span> tango.stdc.posix.sys.types; <span class='com'>// for off_t, mode_t</span>

<span class='kw2'>extern</span> <span class='opr'>(</span>C<span class='opr'>)</span>:

<span class='com'>//</span>
<span class='com'>// Required</span>
<span class='com'>//</span>
<span class='com'>/*
struct stat
{
    dev_t   st_dev;
    ino_t   st_ino;
    mode_t  st_mode;
    nlink_t st_nlink;
    uid_t   st_uid;
    gid_t   st_gid;
    off_t   st_size;
    time_t  st_atime;
    time_t  st_mtime;
    time_t  st_ctime;
}

S_IRWXU
    S_IRUSR
    S_IWUSR
    S_IXUSR
S_IRWXG
    S_IRGRP
    S_IWGRP
    S_IXGRP
S_IRWXO
    S_IROTH
    S_IWOTH
    S_IXOTH
S_ISUID
S_ISGID
S_ISVTX

S_ISBLK(m)
S_ISCHR(m)
S_ISDIR(m)
S_ISFIFO(m)
S_ISREG(m)
S_ISLNK(m)
S_ISSOCK(m)

S_TYPEISMQ(buf)
S_TYPEISSEM(buf)
S_TYPEISSHM(buf)

int    chmod(char*, mode_t);
int    fchmod(int, mode_t);
int    fstat(int, stat*);
int    lstat(char*, stat*);
int    mkdir(char*, mode_t);
int    mkfifo(char*, mode_t);
int    stat(char*, stat*);
mode_t umask(mode_t);
*/</span>

<span class='kw4'>version</span><span class='opr'>(</span> linux <span class='opr'>)</span>
<span class='opr'>{</span>
    <span class='kw4'>struct</span> stat
    <span class='opr'>{</span>
        dev_t       st_dev;
        <span class='kw4'>ushort</span>      __pad1;
      <span class='kw4'>static</span> <span class='kw1'>if</span><span class='opr'>(</span> <span class='kw2'>false</span> <span class='com'>/*__USE_FILE_OFFSET64*/</span> <span class='opr'>)</span>
      <span class='opr'>{</span>
        ino_t       __st_ino;
      <span class='opr'>}</span>
      <span class='kw1'>else</span>
      <span class='opr'>{</span>
        ino_t       st_ino;
      <span class='opr'>}</span>
        mode_t      st_mode;
        nlink_t     st_nlink;
        uid_t       st_uid;
        gid_t       st_gid;
        dev_t       st_rdev;
        <span class='kw4'>ushort</span>      __pad2;
        off_t       st_size;
        blksize_t   st_blksize;
        blkcnt_t    st_blocks;
      <span class='kw4'>static</span> <span class='kw1'>if</span><span class='opr'>(</span> <span class='kw2'>false</span> <span class='com'>/*__USE_MISC*/</span> <span class='opr'>)</span> <span class='com'>// true if _BSD_SOURCE || _SVID_SOURCE</span>
      <span class='opr'>{</span>
        <span class='com'>/* Nanosecond resolution timestamps are stored in a format
        equivalent to 'struct timespec'.  This is the type used
        whenever possible but the Unix namespace rules do not allow the
        identifier 'timespec' to appear in the &lt;sys/stat.h&gt; header.
        Therefore we have to handle the use of this header in strictly
        standard-compliant sources special. */</span>
        timespec    st_atim;
        timespec    st_mtim;
        timespec    st_ctim;
        <span class='kw2'>alias</span> st_atim.tv_sec st_atime;
        <span class='kw2'>alias</span> st_mtim.tv_sec st_mtime;
        <span class='kw2'>alias</span> st_ctim.tv_sec st_ctime;
      <span class='opr'>}</span>
      <span class='kw1'>else</span>
      <span class='opr'>{</span>
        time_t      st_atime;
        c_ulong     st_atimensec;
        time_t      st_mtime;
        c_ulong     st_mtimensec;
        time_t      st_ctime;
        c_ulong     st_ctimensec;
      <span class='opr'>}</span>
      <span class='kw4'>static</span> <span class='kw1'>if</span><span class='opr'>(</span> <span class='kw2'>false</span> <span class='com'>/*__USE_FILE_OFFSET64*/</span> <span class='opr'>)</span>
      <span class='opr'>{</span>
        ino_t       st_ino;
      <span class='opr'>}</span>
      <span class='kw1'>else</span>
      <span class='opr'>{</span>
        c_ulong     __unused4;
        c_ulong     __unused5;
      <span class='opr'>}</span>
    <span class='opr'>}</span>

    <span class='kw4'>const</span> <span class='kw4'>auto</span> S_IRUSR <span class='opr'>=</span> <span class='nbr'>0400</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> S_IWUSR <span class='opr'>=</span> <span class='nbr'>0200</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> S_IXUSR <span class='opr'>=</span> <span class='nbr'>0100</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> S_IRWXU <span class='opr'>=</span> S_IRUSR | S_IWUSR | S_IXUSR;

    <span class='kw4'>const</span> <span class='kw4'>auto</span> S_IRGRP <span class='opr'>=</span> S_IRUSR <span class='opr'>&gt;</span><span class='opr'>&gt;</span> <span class='nbr'>3</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> S_IWGRP <span class='opr'>=</span> S_IWUSR <span class='opr'>&gt;</span><span class='opr'>&gt;</span> <span class='nbr'>3</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> S_IXGRP <span class='opr'>=</span> S_IXUSR <span class='opr'>&gt;</span><span class='opr'>&gt;</span> <span class='nbr'>3</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> S_IRWXG <span class='opr'>=</span> S_IRWXU <span class='opr'>&gt;</span><span class='opr'>&gt;</span> <span class='nbr'>3</span>;

    <span class='kw4'>const</span> <span class='kw4'>auto</span> S_IROTH <span class='opr'>=</span> S_IRGRP <span class='opr'>&gt;</span><span class='opr'>&gt;</span> <span class='nbr'>3</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> S_IWOTH <span class='opr'>=</span> S_IWGRP <span class='opr'>&gt;</span><span class='opr'>&gt;</span> <span class='nbr'>3</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> S_IXOTH <span class='opr'>=</span> S_IXGRP <span class='opr'>&gt;</span><span class='opr'>&gt;</span> <span class='nbr'>3</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> S_IRWXO <span class='opr'>=</span> S_IRWXG <span class='opr'>&gt;</span><span class='opr'>&gt;</span> <span class='nbr'>3</span>;

    <span class='kw4'>const</span> <span class='kw4'>auto</span> S_ISUID <span class='opr'>=</span> <span class='nbr'>04000</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> S_ISGID <span class='opr'>=</span> <span class='nbr'>02000</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> S_ISVTX <span class='opr'>=</span> <span class='nbr'>01000</span>;

    <span class='kw4'>private</span>
    <span class='opr'>{</span>
        <span class='kw4'>const</span> <span class='kw4'>auto</span> S_IFDIR  <span class='opr'>=</span> <span class='nbr'>0040000</span>;
        <span class='kw4'>const</span> <span class='kw4'>auto</span> S_IFCHR  <span class='opr'>=</span> <span class='nbr'>0020000</span>;
        <span class='kw4'>const</span> <span class='kw4'>auto</span> S_IFBLK  <span class='opr'>=</span> <span class='nbr'>0060000</span>;
        <span class='kw4'>const</span> <span class='kw4'>auto</span> S_IFREG  <span class='opr'>=</span> <span class='nbr'>0100000</span>;
        <span class='kw4'>const</span> <span class='kw4'>auto</span> S_IFIFO  <span class='opr'>=</span> <span class='nbr'>0010000</span>;
        <span class='kw4'>const</span> <span class='kw4'>auto</span> S_IFLNK  <span class='opr'>=</span> <span class='nbr'>0120000</span>;
        <span class='kw4'>const</span> <span class='kw4'>auto</span> S_IFSOCK <span class='opr'>=</span> <span class='nbr'>0140000</span>;

        <span class='kw2'>extern</span> <span class='opr'>(</span>D<span class='opr'>)</span> <span class='kw4'>bool</span> S_ISTYPE<span class='opr'>(</span> mode_t mode, <span class='kw4'>uint</span> mask <span class='opr'>)</span>
        <span class='opr'>{</span>
            <span class='kw1'>return</span> <span class='opr'>(</span> mode <span class='opr'>&amp;</span> S_IFMT <span class='opr'>)</span> <span class='opr'>=</span><span class='opr'>=</span> mask;
        <span class='opr'>}</span>
    <span class='opr'>}</span>

    <span class='kw2'>extern</span> <span class='opr'>(</span>D<span class='opr'>)</span> <span class='kw4'>bool</span> S_ISBLK<span class='opr'>(</span> mode_t mode <span class='opr'>)</span>  <span class='opr'>{</span> <span class='kw1'>return</span> S_ISTYPE<span class='opr'>(</span> mode, S_IFBLK <span class='opr'>)</span>;  <span class='opr'>}</span>
    <span class='kw2'>extern</span> <span class='opr'>(</span>D<span class='opr'>)</span> <span class='kw4'>bool</span> S_ISCHR<span class='opr'>(</span> mode_t mode <span class='opr'>)</span>  <span class='opr'>{</span> <span class='kw1'>return</span> S_ISTYPE<span class='opr'>(</span> mode, S_IFCHR <span class='opr'>)</span>;  <span class='opr'>}</span>
    <span class='kw2'>extern</span> <span class='opr'>(</span>D<span class='opr'>)</span> <span class='kw4'>bool</span> S_ISDIR<span class='opr'>(</span> mode_t mode <span class='opr'>)</span>  <span class='opr'>{</span> <span class='kw1'>return</span> S_ISTYPE<span class='opr'>(</span> mode, S_IFDIR <span class='opr'>)</span>;  <span class='opr'>}</span>
    <span class='kw2'>extern</span> <span class='opr'>(</span>D<span class='opr'>)</span> <span class='kw4'>bool</span> S_ISFIFO<span class='opr'>(</span> mode_t mode <span class='opr'>)</span> <span class='opr'>{</span> <span class='kw1'>return</span> S_ISTYPE<span class='opr'>(</span> mode, S_IFIFO <span class='opr'>)</span>;  <span class='opr'>}</span>
    <span class='kw2'>extern</span> <span class='opr'>(</span>D<span class='opr'>)</span> <span class='kw4'>bool</span> S_ISREG<span class='opr'>(</span> mode_t mode <span class='opr'>)</span>  <span class='opr'>{</span> <span class='kw1'>return</span> S_ISTYPE<span class='opr'>(</span> mode, S_IFREG <span class='opr'>)</span>;  <span class='opr'>}</span>
    <span class='kw2'>extern</span> <span class='opr'>(</span>D<span class='opr'>)</span> <span class='kw4'>bool</span> S_ISLNK<span class='opr'>(</span> mode_t mode <span class='opr'>)</span>  <span class='opr'>{</span> <span class='kw1'>return</span> S_ISTYPE<span class='opr'>(</span> mode, S_IFLNK <span class='opr'>)</span>;  <span class='opr'>}</span>
    <span class='kw2'>extern</span> <span class='opr'>(</span>D<span class='opr'>)</span> <span class='kw4'>bool</span> S_ISSOCK<span class='opr'>(</span> mode_t mode <span class='opr'>)</span> <span class='opr'>{</span> <span class='kw1'>return</span> S_ISTYPE<span class='opr'>(</span> mode, S_IFSOCK <span class='opr'>)</span>; <span class='opr'>}</span>

    <span class='kw4'>static</span> <span class='kw1'>if</span><span class='opr'>(</span> <span class='kw2'>true</span> <span class='com'>/*__USE_POSIX199309*/</span> <span class='opr'>)</span>
    <span class='opr'>{</span>
        <span class='kw2'>extern</span> <span class='kw4'>bool</span> S_TYPEISMQ<span class='opr'>(</span> stat<span class='opr'>*</span> buf <span class='opr'>)</span>  <span class='opr'>{</span> <span class='kw1'>return</span> <span class='kw2'>false</span>; <span class='opr'>}</span>
        <span class='kw2'>extern</span> <span class='kw4'>bool</span> S_TYPEISSEM<span class='opr'>(</span> stat<span class='opr'>*</span> buf <span class='opr'>)</span> <span class='opr'>{</span> <span class='kw1'>return</span> <span class='kw2'>false</span>; <span class='opr'>}</span>
        <span class='kw2'>extern</span> <span class='kw4'>bool</span> S_TYPEISSHM<span class='opr'>(</span> stat<span class='opr'>*</span> buf <span class='opr'>)</span> <span class='opr'>{</span> <span class='kw1'>return</span> <span class='kw2'>false</span>; <span class='opr'>}</span>
    <span class='opr'>}</span>
<span class='opr'>}</span>
<span class='kw1'>else</span> <span class='kw4'>version</span><span class='opr'>(</span> darwin <span class='opr'>)</span>
<span class='opr'>{</span>
    <span class='kw4'>struct</span> stat
    <span class='opr'>{</span>
        dev_t       st_dev;
        ino_t       st_ino;
        mode_t      st_mode;
        nlink_t     st_nlink;
        uid_t       st_uid;
        gid_t       st_gid;
        dev_t       st_rdev;
        time_t      st_atime;
        c_ulong     st_atimensec;
        time_t      st_mtime;
        c_ulong     st_mtimensec;
        time_t      st_ctime;
        c_ulong     st_ctimensec;
        off_t       st_size;
        blkcnt_t    st_blocks;
        blksize_t   st_blksize;
        <span class='kw4'>uint</span>        st_flags;
        <span class='kw4'>uint</span>        st_gen;
        <span class='kw4'>int</span>         st_lspare;
        <span class='kw4'>long</span>        st_qspare<span class='opr'>[</span><span class='nbr'>2</span><span class='opr'>]</span>;
    <span class='opr'>}</span>
<span class='opr'>}</span>

<span class='kw4'>int</span>    chmod<span class='opr'>(</span><span class='kw4'>char</span><span class='opr'>*</span>, mode_t<span class='opr'>)</span>;
<span class='kw4'>int</span>    fchmod<span class='opr'>(</span><span class='kw4'>int</span>, mode_t<span class='opr'>)</span>;
<span class='kw4'>int</span>    fstat<span class='opr'>(</span><span class='kw4'>int</span>, stat<span class='opr'>*</span><span class='opr'>)</span>;
<span class='kw4'>int</span>    lstat<span class='opr'>(</span><span class='kw4'>char</span><span class='opr'>*</span>, stat<span class='opr'>*</span><span class='opr'>)</span>;
<span class='kw4'>int</span>    mkdir<span class='opr'>(</span><span class='kw4'>char</span><span class='opr'>*</span>, mode_t<span class='opr'>)</span>;
<span class='kw4'>int</span>    mkfifo<span class='opr'>(</span><span class='kw4'>char</span><span class='opr'>*</span>, mode_t<span class='opr'>)</span>;
<span class='kw4'>int</span>    stat<span class='opr'>(</span><span class='kw4'>char</span><span class='opr'>*</span>, stat<span class='opr'>*</span><span class='opr'>)</span>;
mode_t umask<span class='opr'>(</span>mode_t<span class='opr'>)</span>;

<span class='com'>//</span>
<span class='com'>// Typed Memory Objects (TYM)</span>
<span class='com'>//</span>
<span class='com'>/*
S_TYPEISTMO(buf)
*/</span>

<span class='com'>//</span>
<span class='com'>// XOpen (XSI)</span>
<span class='com'>//</span>
<span class='com'>/*
S_IFMT
S_IFBLK
S_IFCHR
S_IFIFO
S_IFREG
S_IFDIR
S_IFLNK
S_IFSOCK

int mknod(char*, mode_t, dev_t);
*/</span>

<span class='kw4'>version</span><span class='opr'>(</span> darwin <span class='opr'>)</span>
<span class='opr'>{</span>
    <span class='kw4'>const</span> <span class='kw4'>auto</span> S_IFMT   <span class='opr'>=</span> <span class='nbr'>0170000</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> S_IFBLK  <span class='opr'>=</span> <span class='nbr'>0060000</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> S_IFCHR  <span class='opr'>=</span> <span class='nbr'>0020000</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> S_IFIFO  <span class='opr'>=</span> <span class='nbr'>0010000</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> S_IFREG  <span class='opr'>=</span> <span class='nbr'>0100000</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> S_IFDIR  <span class='opr'>=</span> <span class='nbr'>0040000</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> S_IFLNK  <span class='opr'>=</span> <span class='nbr'>0120000</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> S_IFSOCK <span class='opr'>=</span> <span class='nbr'>0140000</span>;

    <span class='kw4'>int</span> mknod<span class='opr'>(</span><span class='kw4'>char</span><span class='opr'>*</span>, mode_t, dev_t<span class='opr'>)</span>;
<span class='opr'>}</span>
</pre></td></tr></table>	</body>
</html>
