<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>
	<head>
		<link rel="stylesheet" href="style.css" type="text/css" />
		<title>fcntl.d</title>
	</head>
	<body>

<table id='dcode'><tr><td id='lnum'><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
</pre></td><td id='code'><pre><span class='com'>/**
 * D header file for POSIX.
 *
 * Copyright: Public Domain
 * License:   Public Domain
 * Authors:   Sean Kelly
 * Standards: The Open Group Base Specifications Issue 6, IEEE Std 1003.1, 2004 Edition
 */</span>
<span class='kw2'>module</span> tango.stdc.posix.fcntl;

<span class='kw4'>private</span> <span class='kw2'>import</span> tango.stdc.config;
<span class='kw4'>private</span> <span class='kw2'>import</span> tango.stdc.stdint;
<span class='kw4'>public</span> <span class='kw2'>import</span> tango.stdc.stddef;          <span class='com'>// for size_t</span>
<span class='kw4'>public</span> <span class='kw2'>import</span> tango.stdc.posix.sys.types; <span class='com'>// for off_t, mode_t</span>
<span class='kw4'>public</span> <span class='kw2'>import</span> tango.stdc.posix.sys.stat;  <span class='com'>// for S_IFMT, etc.</span>

<span class='kw2'>extern</span> <span class='opr'>(</span>C<span class='opr'>)</span>:

<span class='com'>//</span>
<span class='com'>// Required</span>
<span class='com'>//</span>
<span class='com'>/*
F_DUPFD
F_GETFD
F_SETFD
F_GETFL
F_SETFL
F_GETLK
F_SETLK
F_SETLKW
F_GETOWN
F_SETOWN

FD_CLOEXEC

F_RDLCK
F_UNLCK
F_WRLCK

O_CREAT
O_EXCL
O_NOCTTY
O_TRUNC

O_APPEND
O_DSYNC
O_NONBLOCK
O_RSYNC
O_SYNC

O_ACCMODE
O_RDONLY
O_RDWR
O_WRONLY

struct flock
{
    short   l_type;
    short   l_whence;
    off_t   l_start;
    off_t   l_len;
    pid_t   l_pid;
}

int creat(char *, mode_t);
int fcntl(int, int, ...);
int open(char *, int, ...);
*/</span>
<span class='kw4'>version</span><span class='opr'>(</span> linux <span class='opr'>)</span>
<span class='opr'>{</span>
    <span class='kw4'>const</span> <span class='kw4'>auto</span> F_DUPFD      <span class='opr'>=</span> <span class='nbr'>0</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> F_GETFD      <span class='opr'>=</span> <span class='nbr'>1</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> F_SETFD      <span class='opr'>=</span> <span class='nbr'>2</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> F_GETFL      <span class='opr'>=</span> <span class='nbr'>3</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> F_SETFL      <span class='opr'>=</span> <span class='nbr'>4</span>;
  <span class='kw4'>static</span> <span class='kw1'>if</span><span class='opr'>(</span> <span class='kw2'>false</span> <span class='com'>/*__USE_FILE_OFFSET64*/</span> <span class='opr'>)</span>
  <span class='opr'>{</span>
    <span class='kw4'>const</span> <span class='kw4'>auto</span> F_GETLK      <span class='opr'>=</span> <span class='nbr'>5</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> F_SETLK      <span class='opr'>=</span> <span class='nbr'>6</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> F_SETLKW     <span class='opr'>=</span> <span class='nbr'>7</span>;
  <span class='opr'>}</span>
  <span class='kw1'>else</span>
  <span class='opr'>{</span>
    <span class='kw4'>const</span> <span class='kw4'>auto</span> F_GETLK      <span class='opr'>=</span> <span class='nbr'>12</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> F_SETLK      <span class='opr'>=</span> <span class='nbr'>13</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> F_SETLKW     <span class='opr'>=</span> <span class='nbr'>14</span>;
  <span class='opr'>}</span>
    <span class='kw4'>const</span> <span class='kw4'>auto</span> F_GETOWN     <span class='opr'>=</span> <span class='nbr'>9</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> F_SETOWN     <span class='opr'>=</span> <span class='nbr'>8</span>;

    <span class='kw4'>const</span> <span class='kw4'>auto</span> FD_CLOEXEC   <span class='opr'>=</span> <span class='nbr'>1</span>;

    <span class='kw4'>const</span> <span class='kw4'>auto</span> F_RDLCK      <span class='opr'>=</span> <span class='nbr'>0</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> F_UNLCK      <span class='opr'>=</span> <span class='nbr'>2</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> F_WRLCK      <span class='opr'>=</span> <span class='nbr'>1</span>;

    <span class='kw4'>const</span> <span class='kw4'>auto</span> O_CREAT      <span class='opr'>=</span> <span class='nbr'>0100</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> O_EXCL       <span class='opr'>=</span> <span class='nbr'>0200</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> O_NOCTTY     <span class='opr'>=</span> <span class='nbr'>0400</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> O_TRUNC      <span class='opr'>=</span> <span class='nbr'>01000</span>;

    <span class='kw4'>const</span> <span class='kw4'>auto</span> O_APPEND     <span class='opr'>=</span> <span class='nbr'>02000</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> O_NONBLOCK   <span class='opr'>=</span> <span class='nbr'>04000</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> O_SYNC       <span class='opr'>=</span> <span class='nbr'>010000</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> O_DSYNC      <span class='opr'>=</span> O_SYNC;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> O_RSYNC      <span class='opr'>=</span> O_SYNC;

    <span class='kw4'>const</span> <span class='kw4'>auto</span> O_ACCMODE    <span class='opr'>=</span> <span class='nbr'>0003</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> O_RDONLY     <span class='opr'>=</span> <span class='nbr'>00</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> O_WRONLY     <span class='opr'>=</span> <span class='nbr'>01</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> O_RDWR       <span class='opr'>=</span> <span class='nbr'>02</span>;

    <span class='kw4'>struct</span> flock
    <span class='opr'>{</span>
        <span class='kw4'>short</span>   l_type;
        <span class='kw4'>short</span>   l_whence;
        off_t   l_start;
        off_t   l_len;
        pid_t   l_pid;
    <span class='opr'>}</span>
<span class='opr'>}</span>
<span class='kw1'>else</span> <span class='kw4'>version</span><span class='opr'>(</span> darwin <span class='opr'>)</span>
<span class='opr'>{</span>
    <span class='kw4'>const</span> <span class='kw4'>auto</span> F_DUPFD      <span class='opr'>=</span> <span class='nbr'>0</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> F_GETFD      <span class='opr'>=</span> <span class='nbr'>1</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> F_SETFD      <span class='opr'>=</span> <span class='nbr'>2</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> F_GETFL      <span class='opr'>=</span> <span class='nbr'>3</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> F_SETFL      <span class='opr'>=</span> <span class='nbr'>4</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> F_GETOWN     <span class='opr'>=</span> <span class='nbr'>5</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> F_SETOWN     <span class='opr'>=</span> <span class='nbr'>6</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> F_GETLK      <span class='opr'>=</span> <span class='nbr'>7</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> F_SETLK      <span class='opr'>=</span> <span class='nbr'>8</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> F_SETLKW     <span class='opr'>=</span> <span class='nbr'>9</span>;

    <span class='kw4'>const</span> <span class='kw4'>auto</span> FD_CLOEXEC   <span class='opr'>=</span> <span class='nbr'>1</span>;

    <span class='kw4'>const</span> <span class='kw4'>auto</span> F_RDLCK      <span class='opr'>=</span> <span class='nbr'>1</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> F_UNLCK      <span class='opr'>=</span> <span class='nbr'>2</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> F_WRLCK      <span class='opr'>=</span> <span class='nbr'>3</span>;

    <span class='kw4'>const</span> <span class='kw4'>auto</span> O_CREAT      <span class='opr'>=</span> <span class='nbr'>0</span>x0200;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> O_EXCL       <span class='opr'>=</span> <span class='nbr'>0</span>x0800;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> O_NOCTTY     <span class='opr'>=</span> <span class='nbr'>0</span>;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> O_TRUNC      <span class='opr'>=</span> <span class='nbr'>0</span>x0400;

    <span class='kw4'>const</span> <span class='kw4'>auto</span> O_RDONLY     <span class='opr'>=</span> <span class='nbr'>0</span>x0000;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> O_WRONLY     <span class='opr'>=</span> <span class='nbr'>0</span>x0001;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> O_RDWR       <span class='opr'>=</span> <span class='nbr'>0</span>x0002;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> O_ACCMODE    <span class='opr'>=</span> <span class='nbr'>0</span>x0003;

    <span class='kw4'>const</span> <span class='kw4'>auto</span> O_NONBLOCK   <span class='opr'>=</span> <span class='nbr'>0</span>x0004;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> O_APPEND     <span class='opr'>=</span> <span class='nbr'>0</span>x0008;
    <span class='kw4'>const</span> <span class='kw4'>auto</span> O_SYNC       <span class='opr'>=</span> <span class='nbr'>0</span>x0080;
    <span class='com'>//const auto O_DSYNC</span>
    <span class='com'>//const auto O_RSYNC</span>

    <span class='kw4'>struct</span> flock
    <span class='opr'>{</span>
        off_t   l_start;
        off_t   l_len;
        pid_t   l_pid;
        <span class='kw4'>short</span>   l_type;
        <span class='kw4'>short</span>   l_whence;
    <span class='opr'>}</span>
<span class='opr'>}</span>

<span class='kw4'>int</span> creat<span class='opr'>(</span><span class='kw4'>char</span> <span class='opr'>*</span>, mode_t<span class='opr'>)</span>;
<span class='kw4'>int</span> fcntl<span class='opr'>(</span><span class='kw4'>int</span>, <span class='kw4'>int</span>, <span class='opr'>..</span>.<span class='opr'>)</span>;
<span class='kw4'>int</span> open<span class='opr'>(</span><span class='kw4'>char</span> <span class='opr'>*</span>, <span class='kw4'>int</span>, <span class='opr'>..</span>.<span class='opr'>)</span>;

<span class='com'>//</span>
<span class='com'>// Advisory Information (ADV)</span>
<span class='com'>//</span>
<span class='com'>/*
POSIX_FADV_NORMAL
POSIX_FADV_SEQUENTIAL
POSIX_FADV_RANDOM
POSIX_FADV_WILLNEED
POSIX_FADV_DONTNEED
POSIX_FADV_NOREUSE

int posix_fadvise(int, off_t, off_t, int);
int posix_fallocate(int, off_t, off_t);
*/</span>
</pre></td></tr></table>	</body>
</html>
