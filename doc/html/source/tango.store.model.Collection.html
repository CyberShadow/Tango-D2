<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>
	<head>
		<link rel="stylesheet" href="style.css" type="text/css" />
		<title>store/model/Collection.d</title>
	</head>
	<body>

<table id='dcode'><tr><td id='lnum'><pre><span>1</span>
<span>2</span>
<span>3</span>
<span>4</span>
<span>5</span>
<span>6</span>
<span>7</span>
<span>8</span>
<span>9</span>
<span>10</span>
<span>11</span>
<span>12</span>
<span>13</span>
<span>14</span>
<span>15</span>
<span>16</span>
<span>17</span>
<span>18</span>
<span>19</span>
<span>20</span>
<span>21</span>
<span>22</span>
<span>23</span>
<span>24</span>
<span>25</span>
<span>26</span>
<span>27</span>
<span>28</span>
<span>29</span>
<span>30</span>
<span>31</span>
<span>32</span>
<span>33</span>
<span>34</span>
<span>35</span>
<span>36</span>
<span>37</span>
<span>38</span>
<span>39</span>
<span>40</span>
<span>41</span>
<span>42</span>
<span>43</span>
<span>44</span>
<span>45</span>
<span>46</span>
<span>47</span>
<span>48</span>
<span>49</span>
<span>50</span>
<span>51</span>
<span>52</span>
<span>53</span>
<span>54</span>
<span>55</span>
<span>56</span>
<span>57</span>
<span>58</span>
<span>59</span>
<span>60</span>
<span>61</span>
<span>62</span>
<span>63</span>
<span>64</span>
<span>65</span>
<span>66</span>
<span>67</span>
<span>68</span>
<span>69</span>
<span>70</span>
<span>71</span>
<span>72</span>
<span>73</span>
<span>74</span>
<span>75</span>
<span>76</span>
<span>77</span>
<span>78</span>
<span>79</span>
<span>80</span>
<span>81</span>
<span>82</span>
<span>83</span>
<span>84</span>
<span>85</span>
<span>86</span>
<span>87</span>
<span>88</span>
<span>89</span>
<span>90</span>
<span>91</span>
<span>92</span>
<span>93</span>
<span>94</span>
<span>95</span>
<span>96</span>
<span>97</span>
<span>98</span>
<span>99</span>
<span>100</span>
<span>101</span>
<span>102</span>
<span>103</span>
<span>104</span>
<span>105</span>
<span>106</span>
<span>107</span>
<span>108</span>
<span>109</span>
<span>110</span>
<span>111</span>
<span>112</span>
<span>113</span>
<span>114</span>
<span>115</span>
<span>116</span>
<span>117</span>
<span>118</span>
<span>119</span>
<span>120</span>
<span>121</span>
<span>122</span>
<span>123</span>
<span>124</span>
<span>125</span>
<span>126</span>
<span>127</span>
<span>128</span>
<span>129</span>
<span>130</span>
<span>131</span>
<span>132</span>
<span>133</span>
<span>134</span>
<span>135</span>
<span>136</span>
<span>137</span>
<span>138</span>
<span>139</span>
<span>140</span>
<span>141</span>
<span>142</span>
<span>143</span>
<span>144</span>
<span>145</span>
<span>146</span>
<span>147</span>
<span>148</span>
<span>149</span>
<span>150</span>
<span>151</span>
<span>152</span>
<span>153</span>
<span>154</span>
<span>155</span>
<span>156</span>
<span>157</span>
<span>158</span>
<span>159</span>
<span>160</span>
<span>161</span>
<span>162</span>
<span>163</span>
<span>164</span>
<span>165</span>
<span>166</span>
<span>167</span>
<span>168</span>
<span>169</span>
<span>170</span>
<span>171</span>
<span>172</span>
<span>173</span>
<span>174</span>
<span>175</span>
<span>176</span>
<span>177</span>
<span>178</span>
<span>179</span>
<span>180</span>
<span>181</span>
<span>182</span>
<span>183</span>
<span>184</span>
<span>185</span>
<span>186</span>
<span>187</span>
<span>188</span>
<span>189</span>
<span>190</span>
<span>191</span>
<span>192</span>
<span>193</span>
<span>194</span>
<span>195</span>
<span>196</span>
<span>197</span>
<span>198</span>
<span>199</span>
<span>200</span>
<span>201</span>
<span>202</span>
<span>203</span>
<span>204</span>
<span>205</span>
<span>206</span>
<span>207</span>
<span>208</span>
<span>209</span>
<span>210</span>
<span>211</span>
<span>212</span>
<span>213</span>
<span>214</span>
<span>215</span>
<span>216</span>
<span>217</span>
<span>218</span>
<span>219</span>
<span>220</span>
<span>221</span>
<span>222</span>
<span>223</span>
<span>224</span>
<span>225</span>
<span>226</span>
<span>227</span>
<span>228</span>
<span>229</span>
<span>230</span>
<span>231</span>
<span>232</span>
<span>233</span>
<span>234</span>
<span>235</span>
<span>236</span>
<span>237</span>
<span>238</span>
<span>239</span>
</pre></td><td id='code'><pre><span class='com'>/*
 File: Collection.d

 Originally written by Doug Lea and released into the public domain. 
 Thanks for the assistance and support of Sun Microsystems Labs, Agorics 
 Inc, Loral, and everyone contributing, testing, and using this code.

 History:
 Date     Who                What
 24Sep95  dl@cs.oswego.edu   Create from collections.d  working file
 14dec95  dl                 Declare as a subinterface of Cloneable
 9Apr97   dl                 made Serializable

*/</span>


<span class='kw2'>module</span> tango.store.model.Collection;

<span class='kw4'>private</span> <span class='kw2'>import</span> tango.store.model.CollectionIterator;
<span class='kw4'>private</span> <span class='kw2'>import</span> tango.store.model.ImplementationCheckable;


<span class='com'>/**
 * Collection is the base interface for most classes in this package.
 *
 * 
        author: Doug Lea
 * @version 0.93
 *
 * &lt;P&gt; For an introduction to this package see &lt;A HREF=&quot;index.html&quot;&gt; Overview &lt;/A&gt;.
 *
**/</span>
<span class='kw4'>public</span> <span class='kw2'>interface</span> CollectionT<span class='opr'>(</span>T<span class='opr'>)</span> : ImplementationCheckable
<span class='opr'>{</span>

        <span class='kw4'>public</span> <span class='kw4'>char</span><span class='opr'>[</span><span class='opr'>]</span> toString<span class='opr'>(</span><span class='opr'>)</span>;

        <span class='com'>/**
         * public version of java.lang.T.clone
         * All Collections implement clone. But this is a protected method.
         * Duplicate allows public access.
         * @see clone
        **/</span>

        <span class='kw4'>public</span> CollectionT duplicate<span class='opr'>(</span><span class='opr'>)</span>;

        <span class='com'>/**
         * Report the number of elements in the CollectionT.
         * No other spurious effects.
         * @return number of elements
        **/</span>
        <span class='kw4'>public</span> <span class='kw4'>int</span> size<span class='opr'>(</span><span class='opr'>)</span>;

        <span class='com'>/**
         * Report whether this Collection has no elements.
         * Behaviorally equivalent to &lt;CODE&gt;size() == 0&lt;/CODE&gt;.
         * @return true iff size() == 0
        **/</span>

        <span class='kw4'>public</span> <span class='kw4'>bool</span> isEmpty<span class='opr'>(</span><span class='opr'>)</span>;


        <span class='com'>/**
         * Report whether the Collection COULD contain element,
         * i.e., that it is valid with respect to the Collection's
         * element screener if it has one.
         * Always returns false if element == null.
         * A constant function: if canInclude(v) is ever true it is always true.
         * (This property is not in any way enforced however.)
         * No other spurious effects.
         * @return true if non-null and passes element screener check
        **/</span>
        <span class='kw4'>public</span> <span class='kw4'>bool</span> canInclude<span class='opr'>(</span>T element<span class='opr'>)</span>;


        <span class='com'>/**
         * Report the number of occurrences of element in Collection.
         * Always returns 0 if element == null.
         * Otherwise T.equals is used to test for equality.
         * @param element the element to look for
         * @return the number of occurrences (always nonnegative)
        **/</span>
        <span class='kw4'>public</span> <span class='kw4'>int</span> instances<span class='opr'>(</span>T element<span class='opr'>)</span>;

        <span class='com'>/**
         * Report whether the Collection contains element.
         * Behaviorally equivalent to &lt;CODE&gt;instances(element) &amp;gt;= 0&lt;/CODE&gt;.
         * @param element the element to look for
         * @return true iff contains at least one member that is equal to element.
        **/</span>
        <span class='kw4'>public</span> <span class='kw4'>bool</span> contains<span class='opr'>(</span>T element<span class='opr'>)</span>;

        <span class='com'>/**
         * Return an enumeration that may be used to traverse through
         * the elements in the Collection. Standard usage, for some
         * CollectionT c, and some operation `use(T obj)':
         * &lt;PRE&gt;
         * for (Iterator e = c.elements(); e.more(); )
         *   use(e.value());
         * &lt;/PRE&gt;
         * (The values of get very often need to
         * be coerced to types that you know they are.)
         * &lt;P&gt;
         * All Collections return instances
         * of CollectionIterator, that can report the number of remaining
         * elements, and also perform consistency checks so that
         * for MutableCollections, element enumerations may become 
         * invalidated if the Collection is modified during such a traversal
         * (which could in turn cause random effects on the CollectionT.
         * TO prevent this,  CollectionIterators 
         * raise CorruptedIteratorException on attempts to access
         * gets of altered Collections.)
         * Note: Since all Collection implementations are synchronizable,
         * you may be able to guarantee that element traversals will not be
         * corrupted by using the java &lt;CODE&gt;synchronized&lt;/CODE&gt; construct
         * around code blocks that do traversals. (Use with care though,
         * since such constructs can cause deadlock.)
         * &lt;P&gt;
         * Guarantees about the nature of the elements returned by  get of the
         * returned Iterator may vary accross sub-interfaces.
         * In all cases, the enumerations provided by elements() are guaranteed to
         * step through (via get) ALL elements in the Collection.
         * Unless guaranteed otherwise (for example in Seq), elements() enumerations
         * need not have any particular get() ordering so long as they
         * allow traversal of all of the elements. So, for example, two successive
         * calls to element() may produce enumerations with the same
         * elements but different get() orderings.
         * Again, sub-interfaces may provide stronger guarantees. In
         * particular, Seqs produce enumerations with gets in
         * index order, ElementSortedCollections enumerations are in ascending 
         * sorted order, and KeySortedCollections are in ascending order of keys.
         * @return an enumeration e such that
         * &lt;PRE&gt;
         *   e.remaining() == size() &amp;&amp;
         *   foreach (v in e) has(e) 
         * &lt;/PRE&gt;
        **/</span>

        <span class='kw4'>public</span> CollectionIteratorT!<span class='opr'>(</span>T<span class='opr'>)</span> elements<span class='opr'>(</span><span class='opr'>)</span>;

        <span class='com'>/**
         * Report whether other has the same element structure as this.
         * That is, whether other is of the same size, and has the same 
         * elements() properties.
         * This is a useful version of equality testing. But is not named
         * `equals' in part because it may not be the version you need.
         * &lt;P&gt;
         * The easiest way to decribe this operation is just to
         * explain how it is interpreted in standard sub-interfaces:
         * &lt;UL&gt;
         *  &lt;LI&gt; Seq and ElementSortedCollection: other.elements() has the 
         *        same order as this.elements().
         *  &lt;LI&gt; Bag: other.elements has the same instances each element as this.
         *  &lt;LI&gt; Set: other.elements has all elements of this
         *  &lt;LI&gt; Map: other has all (key, element) pairs of this.
         *  &lt;LI&gt; KeySortedCollection: other has all (key, element)
         *       pairs as this, and with keys enumerated in the same order as
         *       this.keys().
         *&lt;/UL&gt;
         * @param other, a Collection
         * @return true if considered to have the same size and elements.
        **/</span>

        <span class='kw4'>public</span> <span class='kw4'>bool</span> matches<span class='opr'>(</span>CollectionT other<span class='opr'>)</span>;


<span class='kw4'>version</span> <span class='opr'>(</span>VERBOSE<span class='opr'>)</span>
<span class='opr'>{</span>
        <span class='com'>/**
         * Construct a new Collection that is a clone of self except
         * that it does not include any occurrences of the indicated element.
         * It is NOT an error to exclude a non-existent element.
         *
         * @param element the element to exclude from the new CollectionT
         * @return a new Collection, c, with the matches as this
         * except that !c.has(element).
        **/</span>
        <span class='kw4'>public</span> CollectionT excluding<span class='opr'>(</span>T element<span class='opr'>)</span>;


        <span class='com'>/**
         * Construct a new Collection that is a clone of self except
         * that it does not include an occurrence of the indicated element.
         * It is NOT an error to remove a non-existent element.
         *
         * @param element the element to exclude from the new Collection
         * @return a new Collection, c, with the matches as this
         * except that c.instances(element) == max(0,instances(element)-1)
        **/</span>
        <span class='kw4'>public</span> CollectionT removingOneOf<span class='opr'>(</span>T element<span class='opr'>)</span>;

        <span class='com'>/**
         * Construct a new Collection that is a clone of self except
         * that one occurrence of oldElement is replaced with
         * newElement. 
         * It is NOT an error to replace a non-existent element.
         *
         * @param oldElement the element to replace
         * @param newElement the replacement
         * @return a new Collection, c, with the matches as this, except:
         * &lt;PRE&gt;
         * let int delta = oldElement.equals(newElement)? 0 : 
         *               max(1, this.instances(oldElement) in
         *  c.instances(oldElement) == this.instances(oldElement) - delta &amp;&amp;
         *  c.instances(newElement) ==  (this instanceof Set) ? 
         *         max(1, this.instances(oldElement) + delta):
         *                this.instances(oldElement) + delta) &amp;&amp;
         * &lt;/PRE&gt;
         * @exception IllegalElementException if has(oldElement) and !canInclude(newElement)
        **/</span>
        <span class='kw4'>public</span> CollectionT replacingOneOf<span class='opr'>(</span>T oldElement, T newElement<span class='opr'>)</span>;


        <span class='com'>/**
         * Construct a new Collection that is a clone of self except
         * that all occurrences of oldElement are replaced with
         * newElement. 
         * It is NOT an error to convert a non-existent element.
         *
         * @param oldElement the element to replace
         * @param newElement the replacement
         * @return a new Collection, c, with the matches as this except
         * &lt;PRE&gt;
         * let int delta = oldElement.equals(newElement)? 0 : 
                           instances(oldElement) in
         *  c.instances(oldElement) == this.instances(oldElement) - delta &amp;&amp;
         *  c.instances(newElement) ==  (this instanceof Set) ? 
         *         max(1, this.instances(oldElement) + delta):
         *                this.instances(oldElement) + delta)
         * &lt;/PRE&gt;
         * @exception IllegalElementException if has(oldElement) and !canInclude(newElement)
        **/</span>

        <span class='kw4'>public</span> CollectionT replacingAllOf<span class='opr'>(</span>T oldElement, T newElement<span class='opr'>)</span>;
<span class='opr'>}</span> <span class='com'>// version</span>
<span class='opr'>}</span>


<span class='kw2'>alias</span> CollectionT!<span class='opr'>(</span><span class='kw3'>Object</span><span class='opr'>)</span> Collection;
</pre></td></tr></table>	</body>
</html>
