<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>
	<head>
		<link rel="stylesheet" href="style.css" type="text/css" />
		<title>io/protocol/model/IReader.d</title>
	</head>
	<body>

<table id='dcode'><tr><td id='lnum'><pre><span>1</span>
<span>2</span>
<span>3</span>
<span>4</span>
<span>5</span>
<span>6</span>
<span>7</span>
<span>8</span>
<span>9</span>
<span>10</span>
<span>11</span>
<span>12</span>
<span>13</span>
<span>14</span>
<span>15</span>
<span>16</span>
<span>17</span>
<span>18</span>
<span>19</span>
<span>20</span>
<span>21</span>
<span>22</span>
<span>23</span>
<span>24</span>
<span>25</span>
<span>26</span>
<span>27</span>
<span>28</span>
<span>29</span>
<span>30</span>
<span>31</span>
<span>32</span>
<span>33</span>
<span>34</span>
<span>35</span>
<span>36</span>
<span>37</span>
<span>38</span>
<span>39</span>
<span>40</span>
<span>41</span>
<span>42</span>
<span>43</span>
<span>44</span>
<span>45</span>
<span>46</span>
<span>47</span>
<span>48</span>
<span>49</span>
<span>50</span>
<span>51</span>
<span>52</span>
<span>53</span>
<span>54</span>
<span>55</span>
<span>56</span>
<span>57</span>
<span>58</span>
<span>59</span>
<span>60</span>
<span>61</span>
<span>62</span>
<span>63</span>
<span>64</span>
<span>65</span>
<span>66</span>
<span>67</span>
<span>68</span>
<span>69</span>
<span>70</span>
<span>71</span>
<span>72</span>
<span>73</span>
<span>74</span>
<span>75</span>
<span>76</span>
<span>77</span>
<span>78</span>
<span>79</span>
<span>80</span>
<span>81</span>
<span>82</span>
<span>83</span>
<span>84</span>
<span>85</span>
<span>86</span>
<span>87</span>
<span>88</span>
<span>89</span>
<span>90</span>
<span>91</span>
<span>92</span>
<span>93</span>
<span>94</span>
<span>95</span>
<span>96</span>
<span>97</span>
<span>98</span>
<span>99</span>
<span>100</span>
<span>101</span>
<span>102</span>
<span>103</span>
<span>104</span>
<span>105</span>
<span>106</span>
<span>107</span>
<span>108</span>
<span>109</span>
<span>110</span>
<span>111</span>
<span>112</span>
<span>113</span>
<span>114</span>
<span>115</span>
<span>116</span>
<span>117</span>
<span>118</span>
<span>119</span>
<span>120</span>
<span>121</span>
<span>122</span>
<span>123</span>
<span>124</span>
<span>125</span>
<span>126</span>
<span>127</span>
<span>128</span>
<span>129</span>
<span>130</span>
<span>131</span>
<span>132</span>
<span>133</span>
<span>134</span>
<span>135</span>
<span>136</span>
<span>137</span>
<span>138</span>
<span>139</span>
<span>140</span>
<span>141</span>
<span>142</span>
<span>143</span>
<span>144</span>
<span>145</span>
<span>146</span>
<span>147</span>
<span>148</span>
<span>149</span>
<span>150</span>
<span>151</span>
<span>152</span>
<span>153</span>
<span>154</span>
<span>155</span>
<span>156</span>
<span>157</span>
<span>158</span>
<span>159</span>
<span>160</span>
<span>161</span>
<span>162</span>
<span>163</span>
<span>164</span>
<span>165</span>
<span>166</span>
<span>167</span>
<span>168</span>
<span>169</span>
<span>170</span>
<span>171</span>
<span>172</span>
<span>173</span>
<span>174</span>
<span>175</span>
<span>176</span>
<span>177</span>
<span>178</span>
</pre></td><td id='code'><pre><span class='com'>/*******************************************************************************

        copyright:      Copyright (c) 2004 Kris Bell. All rights reserved

        license:        BSD style: $(LICENSE)

        version:        Initial release: March 2004     
         
        author:         Kris
                        Ivan Senji (the &quot;alias get&quot; idea)

*******************************************************************************/</span>

<span class='kw2'>module</span> tango.io.protocol.model.IReader;

<span class='kw4'>public</span> <span class='kw2'>import</span> tango.io.model.IBuffer;

<span class='com'>/*******************************************************************************

        Any class implementing IReadable becomes part of the Reader framework
        
*******************************************************************************/</span>

<span class='kw2'>interface</span> IReadable
<span class='opr'>{</span>
        <span class='kw4'>abstract</span> <span class='kw4'>void</span> read <span class='opr'>(</span>IReader input<span class='opr'>)</span>;
<span class='opr'>}</span>

<span class='com'>/*******************************************************************************

*******************************************************************************/</span>

<span class='kw2'>interface</span> IArrayAllocator
<span class='opr'>{</span>
        <span class='kw4'>abstract</span> <span class='kw4'>void</span> reset <span class='opr'>(</span><span class='opr'>)</span>;

        <span class='kw4'>abstract</span> <span class='kw4'>void</span> bind <span class='opr'>(</span>IReader input<span class='opr'>)</span>;

        <span class='kw4'>abstract</span> <span class='kw4'>bool</span> isMutable <span class='opr'>(</span><span class='kw4'>void</span><span class='opr'>*</span> x<span class='opr'>)</span>;

        <span class='kw4'>abstract</span> <span class='kw4'>void</span> allocate  <span class='opr'>(</span><span class='kw4'>void</span><span class='opr'>[</span><span class='opr'>]</span><span class='opr'>*</span> x, <span class='kw4'>uint</span> size, <span class='kw4'>uint</span> width, <span class='kw4'>uint</span> type, IBuffer.Converter convert<span class='opr'>)</span>;
<span class='opr'>}</span>

<span class='com'>/*******************************************************************************

        All reader instances should implement this interface.

*******************************************************************************/</span>

<span class='kw4'>abstract</span> <span class='kw4'>class</span> IReader   <span class='com'>// could be an interface, but that causes poor codegen</span>
<span class='opr'>{</span>
        <span class='kw2'>alias</span> get opShr;
        <span class='kw2'>alias</span> get opCall;

        <span class='com'>/***********************************************************************
        
                These are the basic reader methods

        ***********************************************************************/</span>

        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>bool</span> x<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>byte</span> x<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>ubyte</span> x<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>short</span> x<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>ushort</span> x<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>int</span> x<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>uint</span> x<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>long</span> x<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>ulong</span> x<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>float</span> x<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>double</span> x<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>real</span> x<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>char</span> x<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>wchar</span> x<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>dchar</span> x<span class='opr'>)</span>;

        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>byte</span><span class='opr'>[</span><span class='opr'>]</span> x,   <span class='kw4'>uint</span> elements <span class='opr'>=</span> <span class='kw4'>uint</span>.max<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>short</span><span class='opr'>[</span><span class='opr'>]</span> x,  <span class='kw4'>uint</span> elements <span class='opr'>=</span> <span class='kw4'>uint</span>.max<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>int</span><span class='opr'>[</span><span class='opr'>]</span> x,    <span class='kw4'>uint</span> elements <span class='opr'>=</span> <span class='kw4'>uint</span>.max<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>long</span><span class='opr'>[</span><span class='opr'>]</span> x,   <span class='kw4'>uint</span> elements <span class='opr'>=</span> <span class='kw4'>uint</span>.max<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>ubyte</span><span class='opr'>[</span><span class='opr'>]</span> x,  <span class='kw4'>uint</span> elements <span class='opr'>=</span> <span class='kw4'>uint</span>.max<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>ushort</span><span class='opr'>[</span><span class='opr'>]</span> x, <span class='kw4'>uint</span> elements <span class='opr'>=</span> <span class='kw4'>uint</span>.max<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>uint</span><span class='opr'>[</span><span class='opr'>]</span> x,   <span class='kw4'>uint</span> elements <span class='opr'>=</span> <span class='kw4'>uint</span>.max<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>ulong</span><span class='opr'>[</span><span class='opr'>]</span> x,  <span class='kw4'>uint</span> elements <span class='opr'>=</span> <span class='kw4'>uint</span>.max<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>float</span><span class='opr'>[</span><span class='opr'>]</span> x,  <span class='kw4'>uint</span> elements <span class='opr'>=</span> <span class='kw4'>uint</span>.max<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>double</span><span class='opr'>[</span><span class='opr'>]</span> x, <span class='kw4'>uint</span> elements <span class='opr'>=</span> <span class='kw4'>uint</span>.max<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>real</span><span class='opr'>[</span><span class='opr'>]</span> x,   <span class='kw4'>uint</span> elements <span class='opr'>=</span> <span class='kw4'>uint</span>.max<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>char</span><span class='opr'>[</span><span class='opr'>]</span> x,   <span class='kw4'>uint</span> elements <span class='opr'>=</span> <span class='kw4'>uint</span>.max<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>wchar</span><span class='opr'>[</span><span class='opr'>]</span> x,  <span class='kw4'>uint</span> elements <span class='opr'>=</span> <span class='kw4'>uint</span>.max<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>dchar</span><span class='opr'>[</span><span class='opr'>]</span> x,  <span class='kw4'>uint</span> elements <span class='opr'>=</span> <span class='kw4'>uint</span>.max<span class='opr'>)</span>;

        <span class='com'>/***********************************************************************
        
                This is the mechanism used for binding arbitrary classes 
                to the IO system. If a class implements IReadable, it can
                be used as a target for IReader get() operations. That is, 
                implementing IReadable is intended to transform any class 
                into an IReader adaptor for the content held therein.

        ***********************************************************************/</span>

        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span>IReadable x<span class='opr'>)</span>;

        <span class='com'>/***********************************************************************
                
                Pause the current thread until some content arrives in
                the associated input buffer. This may stall forever.

        ***********************************************************************/</span>

        <span class='kw4'>abstract</span> <span class='kw4'>void</span> wait <span class='opr'>(</span><span class='opr'>)</span>;

        <span class='com'>/***********************************************************************
        
                Return the buffer associated with this reader

        ***********************************************************************/</span>

        <span class='kw4'>abstract</span> IBuffer getBuffer <span class='opr'>(</span><span class='opr'>)</span>;

        <span class='com'>/***********************************************************************
        
                Get the allocator to use for array management. Arrays are
                always allocated by the IReader. That is, you cannot read
                data into an array slice (for example). Instead, a number
                of IArrayAllocator classes are available to manage memory
                allocation when reading array content. 

                You might use this to manage the assigned allocator. For
                example, some allocators benefit from a reset() operation
                after each data 'record' has been processed.

        ***********************************************************************/</span>

        <span class='kw4'>abstract</span> IArrayAllocator getAllocator <span class='opr'>(</span><span class='opr'>)</span>; 

        <span class='com'>/***********************************************************************
        
                Set the allocator to use for array management. Arrays are
                always allocated by the IReader. That is, you cannot read
                data into an array slice (for example). Instead, a number
                of IArrayAllocator classes are available to manage memory
                allocation when reading array content. 

                By default, an IReader will allocate each array from the 
                heap. You can change that behavior by calling this method
                with an IArrayAllocator of choice. For instance, there 
                is a BufferAllocator which will slice an array directly 
                from the buffer where possible. Also available is the 
                record-oriented SliceAllocator, which slices memory from 
                within a pre-allocated heap area, and should be reset by
                the client code after each record has been read (to avoid 
                unnecessary growth).

                See ArrayAllocator for more information.

        ***********************************************************************/</span>

        <span class='kw4'>abstract</span> <span class='kw4'>void</span> setAllocator <span class='opr'>(</span>IArrayAllocator memory<span class='opr'>)</span>; 

        <span class='com'>/***********************************************************************
        
                Bind an IDecoder to the writer. Decoders are intended to
                be used as a conversion mechanism between various character
                representations (encodings).

        ***********************************************************************/</span>

        <span class='kw4'>abstract</span> <span class='kw4'>void</span> setDecoder <span class='opr'>(</span>AbstractDecoder<span class='opr'>)</span>;

        <span class='com'>/***********************************************************************
        
                Return the current decoder type (Type.Raw if not set)

        ***********************************************************************/</span>

        <span class='kw4'>abstract</span> <span class='kw4'>int</span> getDecoderType <span class='opr'>(</span><span class='opr'>)</span>;
<span class='opr'>}</span>
</pre></td></tr></table>	</body>
</html>
