<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>
	<head>
		<link rel="stylesheet" href="style.css" type="text/css" />
		<title>IReader.d</title>
	</head>
	<body>

<table id='dcode'><tr><td id='lnum'><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
</pre></td><td id='code'><pre><span class='com'>/*******************************************************************************

        copyright:      Copyright (c) 2004 Kris Bell. All rights reserved

        license:        BSD style: $(LICENSE)

        version:        Initial release: March 2004     
         
        author:         Kris
                        Ivan Senji (the &quot;alias get&quot; idea)

*******************************************************************************/</span>

<span class='kw2'>module</span> tango.io.protocol.model.IReader;

<span class='kw4'>public</span> <span class='kw2'>import</span> tango.io.model.IBuffer;

<span class='com'>/*******************************************************************************

        Any class implementing IReadable becomes part of the Reader framework
        
*******************************************************************************/</span>

<span class='kw2'>interface</span> IReadable
<span class='opr'>{</span>
        <span class='kw4'>abstract</span> <span class='kw4'>void</span> read <span class='opr'>(</span>IReader input<span class='opr'>)</span>;
<span class='opr'>}</span>

<span class='com'>/*******************************************************************************

*******************************************************************************/</span>

<span class='kw2'>interface</span> IArrayAllocator
<span class='opr'>{</span>
        <span class='kw4'>abstract</span> <span class='kw4'>void</span> reset <span class='opr'>(</span><span class='opr'>)</span>;

        <span class='kw4'>abstract</span> <span class='kw4'>void</span> bind <span class='opr'>(</span>IReader input<span class='opr'>)</span>;

        <span class='kw4'>abstract</span> <span class='kw4'>bool</span> isMutable <span class='opr'>(</span><span class='kw4'>void</span><span class='opr'>*</span> x<span class='opr'>)</span>;

        <span class='kw4'>abstract</span> <span class='kw4'>void</span> allocate  <span class='opr'>(</span><span class='kw4'>void</span><span class='opr'>[</span><span class='opr'>]</span><span class='opr'>*</span> x, <span class='kw4'>uint</span> size, <span class='kw4'>uint</span> width, <span class='kw4'>uint</span> type, IBuffer.Converter convert<span class='opr'>)</span>;
<span class='opr'>}</span>

<span class='com'>/*******************************************************************************

        All reader instances should implement this interface.

*******************************************************************************/</span>

<span class='kw4'>abstract</span> <span class='kw4'>class</span> IReader   <span class='com'>// could be an interface, but that causes poor codegen</span>
<span class='opr'>{</span>
        <span class='kw2'>alias</span> get opShr;
        <span class='kw2'>alias</span> get opCall;

        <span class='com'>/***********************************************************************
        
                These are the basic reader methods

        ***********************************************************************/</span>

        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>bool</span> x<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>byte</span> x<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>ubyte</span> x<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>short</span> x<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>ushort</span> x<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>int</span> x<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>uint</span> x<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>long</span> x<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>ulong</span> x<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>float</span> x<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>double</span> x<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>real</span> x<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>char</span> x<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>wchar</span> x<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>dchar</span> x<span class='opr'>)</span>;

        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>byte</span><span class='opr'>[</span><span class='opr'>]</span> x,   <span class='kw4'>uint</span> elements <span class='opr'>=</span> <span class='kw4'>uint</span>.max<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>short</span><span class='opr'>[</span><span class='opr'>]</span> x,  <span class='kw4'>uint</span> elements <span class='opr'>=</span> <span class='kw4'>uint</span>.max<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>int</span><span class='opr'>[</span><span class='opr'>]</span> x,    <span class='kw4'>uint</span> elements <span class='opr'>=</span> <span class='kw4'>uint</span>.max<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>long</span><span class='opr'>[</span><span class='opr'>]</span> x,   <span class='kw4'>uint</span> elements <span class='opr'>=</span> <span class='kw4'>uint</span>.max<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>ubyte</span><span class='opr'>[</span><span class='opr'>]</span> x,  <span class='kw4'>uint</span> elements <span class='opr'>=</span> <span class='kw4'>uint</span>.max<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>ushort</span><span class='opr'>[</span><span class='opr'>]</span> x, <span class='kw4'>uint</span> elements <span class='opr'>=</span> <span class='kw4'>uint</span>.max<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>uint</span><span class='opr'>[</span><span class='opr'>]</span> x,   <span class='kw4'>uint</span> elements <span class='opr'>=</span> <span class='kw4'>uint</span>.max<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>ulong</span><span class='opr'>[</span><span class='opr'>]</span> x,  <span class='kw4'>uint</span> elements <span class='opr'>=</span> <span class='kw4'>uint</span>.max<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>float</span><span class='opr'>[</span><span class='opr'>]</span> x,  <span class='kw4'>uint</span> elements <span class='opr'>=</span> <span class='kw4'>uint</span>.max<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>double</span><span class='opr'>[</span><span class='opr'>]</span> x, <span class='kw4'>uint</span> elements <span class='opr'>=</span> <span class='kw4'>uint</span>.max<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>real</span><span class='opr'>[</span><span class='opr'>]</span> x,   <span class='kw4'>uint</span> elements <span class='opr'>=</span> <span class='kw4'>uint</span>.max<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>char</span><span class='opr'>[</span><span class='opr'>]</span> x,   <span class='kw4'>uint</span> elements <span class='opr'>=</span> <span class='kw4'>uint</span>.max<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>wchar</span><span class='opr'>[</span><span class='opr'>]</span> x,  <span class='kw4'>uint</span> elements <span class='opr'>=</span> <span class='kw4'>uint</span>.max<span class='opr'>)</span>;
        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span><span class='kw2'>inout</span> <span class='kw4'>dchar</span><span class='opr'>[</span><span class='opr'>]</span> x,  <span class='kw4'>uint</span> elements <span class='opr'>=</span> <span class='kw4'>uint</span>.max<span class='opr'>)</span>;

        <span class='com'>/***********************************************************************
        
                This is the mechanism used for binding arbitrary classes 
                to the IO system. If a class implements IReadable, it can
                be used as a target for IReader get() operations. That is, 
                implementing IReadable is intended to transform any class 
                into an IReader adaptor for the content held therein.

        ***********************************************************************/</span>

        <span class='kw4'>abstract</span> IReader get <span class='opr'>(</span>IReadable x<span class='opr'>)</span>;

        <span class='com'>/***********************************************************************
                
                Pause the current thread until some content arrives in
                the associated input buffer. This may stall forever.

        ***********************************************************************/</span>

        <span class='kw4'>abstract</span> <span class='kw4'>void</span> wait <span class='opr'>(</span><span class='opr'>)</span>;

        <span class='com'>/***********************************************************************
        
                Return the buffer associated with this reader

        ***********************************************************************/</span>

        <span class='kw4'>abstract</span> IBuffer getBuffer <span class='opr'>(</span><span class='opr'>)</span>;

        <span class='com'>/***********************************************************************
        
                Get the allocator to use for array management. Arrays are
                always allocated by the IReader. That is, you cannot read
                data into an array slice (for example). Instead, a number
                of IArrayAllocator classes are available to manage memory
                allocation when reading array content. 

                You might use this to manage the assigned allocator. For
                example, some allocators benefit from a reset() operation
                after each data 'record' has been processed.

        ***********************************************************************/</span>

        <span class='kw4'>abstract</span> IArrayAllocator getAllocator <span class='opr'>(</span><span class='opr'>)</span>; 

        <span class='com'>/***********************************************************************
        
                Set the allocator to use for array management. Arrays are
                always allocated by the IReader. That is, you cannot read
                data into an array slice (for example). Instead, a number
                of IArrayAllocator classes are available to manage memory
                allocation when reading array content. 

                By default, an IReader will allocate each array from the 
                heap. You can change that behavior by calling this method
                with an IArrayAllocator of choice. For instance, there 
                is a BufferAllocator which will slice an array directly 
                from the buffer where possible. Also available is the 
                record-oriented SliceAllocator, which slices memory from 
                within a pre-allocated heap area, and should be reset by
                the client code after each record has been read (to avoid 
                unnecessary growth).

                See ArrayAllocator for more information.

        ***********************************************************************/</span>

        <span class='kw4'>abstract</span> <span class='kw4'>void</span> setAllocator <span class='opr'>(</span>IArrayAllocator memory<span class='opr'>)</span>; 

        <span class='com'>/***********************************************************************
        
                Bind an IDecoder to the writer. Decoders are intended to
                be used as a conversion mechanism between various character
                representations (encodings).

        ***********************************************************************/</span>

        <span class='kw4'>abstract</span> <span class='kw4'>void</span> setDecoder <span class='opr'>(</span>AbstractDecoder<span class='opr'>)</span>;

        <span class='com'>/***********************************************************************
        
                Return the current decoder type (Type.Raw if not set)

        ***********************************************************************/</span>

        <span class='kw4'>abstract</span> <span class='kw4'>int</span> getDecoderType <span class='opr'>(</span><span class='opr'>)</span>;
<span class='opr'>}</span>
</pre></td></tr></table>	</body>
</html>
