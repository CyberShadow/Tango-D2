
<html><head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta content="text/javascript" http-equiv="content-script-type">
<title>tango.net.http.HttpClient</title>
<link rel="stylesheet" type="text/css" href="candydoc/style.css">
<!--[if lt IE 7]><link rel="stylesheet" type="text/css" href="candydoc/ie56hack.css"><![endif]-->
<script language="JavaScript" src="candydoc/util.js" type="text/javascript"></script>
<script language="JavaScript" src="candydoc/tree.js" type="text/javascript"></script>
<script language="JavaScript" src="candydoc/explorer.js" type="text/javascript"></script>
<script>
function anchorFromTitle(title, path, ext) {
  var url = path + title + "." + ext;
  document.write("<a href='" + url + "'>" + title + "</a>");
  }
</script>
</head><body>
<div id="tabarea"></div><div id="explorerclient"></div>
<div id="content"><script>explorer.initialize("tango.net.http.HttpClient");</script>
	<table class="content">
		<tr><td id="docbody"><h1><script>anchorFromTitle('tango.net.http.HttpClient', 'http://svn.dsource.org/projects/tango/trunk/doc/html/source/', 'html');</script></h1><!-- Generated by Ddoc from tango\net\http\HttpClient.d -->
<b>License:</b><br>
BSD style: see <a href="http://www.dsource.org/projects/tango/wiki/LibraryLicense">license.txt</a>

<br><br>
<b>Version:</b><br>
Initial release: April 2004

<br><br>
<b>author:</b><br>
Kris    - original module
<br><br>
<b>author:</b><br>
h3r3tic - fixed a number of Post issues and
                                  bugs in the 'params' construction
<br><br>

        Redirection handling guided via
<br><br>
<b>http:</b><br>
//ppewww.ph.gla.ac.uk/~flavell/www/post-redirect.html

<br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl>
<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>class 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.net.http.HttpClient.HttpClient">HttpClient</a></span>
<script>explorer.outline.addDecl('HttpClient');</script>
;
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Supports the basic needs of a client making requests of an HTTP
        server. The following is an example of how this might be used:
</font><br><br>
<font color=black><pre class="d_code">        <font color=grey>// callback for client reader
</font>        <font color=blue>void</font> sink (<font color=blue>char</font>[] content)
        {
                Stdout.put (content);
        }

        <font color=grey>// create client for a GET request
</font>        <font color=blue>auto</font> client = <font color=blue>new</font> HttpClient (HttpClient.Get, <font color=navy>"http://www.yahoo.com"</font>);

        <font color=grey>// make request
</font>        client.open ();

        <font color=grey>// check return status for validity
</font>        <font color=blue>if</font> (client.isResponseOK)
           {
           <font color=grey>// extract content length
</font>           <font color=blue>int</font> length = client.getResponseHeaders.getInt (HttpHeader.ContentLength, <font color=blue>int</font>.max);

           <font color=grey>// display all returned headers
</font>           Stdout.put (client.getResponseHeaders);

           <font color=grey>// display remaining content
</font>           client.read (&amp;sink, length);
           }
        <font color=blue>else</font>
           Stderr.put (client.getResponse);

        client.close ();
</pre>

</font><br><br>


<script>explorer.outline.incSymbolLevel();</script>
<dl>
<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>this(RequestMethod <span class="funcparam">method</span>, char[] <span class="funcparam">url</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Create a client for the given URL. The argument should be
                fully qualified with an "http:" or "https:" scheme, or an
                explicit port should be provided.
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>this(RequestMethod <span class="funcparam">method</span>, MutableUri <span class="funcparam">uri</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Create a client with the provided Uri instance. The Uri should
                be fully qualified with an "http:" or "https:" scheme, or an
                explicit port should be provided.
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>HttpHeaders 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.net.http.HttpClient.getResponseHeaders">getResponseHeaders</a></span>
<script>explorer.outline.addDecl('getResponseHeaders');</script>
();
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Get the current input headers, as returned by the host request.
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>HttpMutableHeaders 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.net.http.HttpClient.getRequestHeaders">getRequestHeaders</a></span>
<script>explorer.outline.addDecl('getRequestHeaders');</script>
();
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Gain access to the request headers. Use this to add whatever
                headers are required for a request.
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>HttpMutableParams 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.net.http.HttpClient.getRequestParams">getRequestParams</a></span>
<script>explorer.outline.addDecl('getRequestParams');</script>
();
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Gain access to the request parameters. Use this to add x=y
                style parameters to the request. These will be appended to
                the request assuming the original Uri does not contain any
                of its own.
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>Uri 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.net.http.HttpClient.getUri">getUri</a></span>
<script>explorer.outline.addDecl('getUri');</script>
();
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Return the Uri associated with this client
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>ResponseLine 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.net.http.HttpClient.getResponse">getResponse</a></span>
<script>explorer.outline.addDecl('getResponse');</script>
();
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Return the response-line for the latest request. This takes
                the form of "version status reason" as defined in the HTTP
                RFC.
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>int 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.net.http.HttpClient.getStatus">getStatus</a></span>
<script>explorer.outline.addDecl('getStatus');</script>
();
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Return the HTTP status code set by the remote server
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>bool 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.net.http.HttpClient.isResponseOK">isResponseOK</a></span>
<script>explorer.outline.addDecl('isResponseOK');</script>
();
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Return whether the response was OK or not
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>void 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.net.http.HttpClient.addCookie">addCookie</a></span>
<script>explorer.outline.addDecl('addCookie');</script>
(Cookie <span class="funcparam">cookie</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Add a <span class="funcparam">cookie</span> to the outgoing headers
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>void 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.net.http.HttpClient.close">close</a></span>
<script>explorer.outline.addDecl('close');</script>
();
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Close all resources used by a request. You must invoke this
                between successive open() calls.
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>void 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.net.http.HttpClient.reset">reset</a></span>
<script>explorer.outline.addDecl('reset');</script>
();
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Reset the client such that it is ready for a new request.
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>void 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.net.http.HttpClient.enableRedirect">enableRedirect</a></span>
<script>explorer.outline.addDecl('enableRedirect');</script>
(bool <span class="funcparam">yes</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>enable/disable the internal redirection suppport
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>protected SocketConduit 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.net.http.HttpClient.createSocket">createSocket</a></span>
<script>explorer.outline.addDecl('createSocket');</script>
();
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Overridable method to create a Socket. You may find a need
                to override this for some purpose; perhaps to add input or
                output filters.
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>protected IBuffer 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.net.http.HttpClient.inputBuffer">inputBuffer</a></span>
<script>explorer.outline.addDecl('inputBuffer');</script>
(IConduit <span class="funcparam">conduit</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><br><br>
</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>protected IBuffer 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.net.http.HttpClient.outputBuffer">outputBuffer</a></span>
<script>explorer.outline.addDecl('outputBuffer');</script>
(IConduit <span class="funcparam">conduit</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><br><br>
</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>IBuffer 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.net.http.HttpClient.open">open</a></span>
<script>explorer.outline.addDecl('open');</script>
(void delegate(IBuffer) <span class="funcparam">pump</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Make a request for the resource specified via the constructor,
                using a callback for pumping additional data to the host. This
                defaults to a three-second timeout period. The return value
                represents the input buffer, from which all returned headers
                and content may be accessed.
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>IBuffer 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.net.http.HttpClient.open">open</a></span>
<script>explorer.outline.addDecl('open');</script>
(Interval <span class="funcparam">timeout</span> = cast(Interval)1000000u * cast(Interval)3u);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Make a request for the resource specified via the constructor,
                using the specified <span class="funcparam">timeout</span> period (in milli-seconds).The
                return value represents the input buffer, from which all
                returned headers and content may be accessed.
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>IBuffer 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.net.http.HttpClient.open">open</a></span>
<script>explorer.outline.addDecl('open');</script>
(Interval <span class="funcparam">timeout</span>, void delegate(IBuffer) <span class="funcparam">pump</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Make a request for the resource specified via the constructor
                using the specified <span class="funcparam">timeout</span> period (in micro-seconds), and a
                user-defined callback for pumping additional data to the host.
                The callback would be used when uploading data during a 'put'
                operation (or equivalent). The return value represents the
                input buffer, from which all returned headers and content may
                be accessed.
</font><br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>void 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.net.http.HttpClient.read">read</a></span>
<script>explorer.outline.addDecl('read');</script>
(void delegate(void[]) <span class="funcparam">sink</span>, long <span class="funcparam">length</span> = 9223372036854775807L);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><br><br>
</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>IBuffer 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.net.http.HttpClient.redirectPost">redirectPost</a></span>
<script>explorer.outline.addDecl('redirectPost');</script>
(Interval <span class="funcparam">timeout</span>, void delegate(IBuffer) <span class="funcparam">pump</span>, int <span class="funcparam">status</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Handle redirection of Post
</font><br><br>
<font color=black>Guidance for the default behaviour came from this page:
</font><br><br>
<b>http:</b><br>
//ppewww.ph.gla.ac.uk/~flavell/www/post-redirect.html
<br><br>

        
<br><br>

</dd>


<script>explorer.outline.writeEnabled = true;</script>
<dt><span class="decl"><li>bool 
<span class="currsymbol"><a href="http://www.dsource.org/projects/tango/wiki/tango.net.http.HttpClient.canRepost">canRepost</a></span>
<script>explorer.outline.addDecl('canRepost');</script>
(uint <span class="funcparam">status</span>);
</li></span></dt>
<script>explorer.outline.writeEnabled = false;</script>

<dd><font color=black>Handle user-notification of Post redirection. This should
                be overridden appropriately.
</font><br><br>
<font color=black>Guidance for the default behaviour came from this page:
</font><br><br>
<b>http:</b><br>
//ppewww.ph.gla.ac.uk/~flavell/www/post-redirect.html
<br><br>

        
<br><br>

</dd>

</dl>
<script>explorer.outline.decSymbolLevel();</script>


</dd>

</dl>
<script>explorer.outline.decSymbolLevel();</script>


</td></tr>
		<tr><td id="docfooter">
                        Copyright (c) 2004 Kris Bell. All rights reserved

 :: page rendered by CandyDoc
		</td></tr>
	</table>
</div>
<script></script>
</body></html>


