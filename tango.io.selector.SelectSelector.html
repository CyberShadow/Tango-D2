<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>tango.io.selector.SelectSelector</title>
  <link href="css/style.css" rel="stylesheet" type="text/css"/>
  <!-- no favicon -->
  <script type="text/javascript" src="js/jquery.js"></script>
  <script type="text/javascript" src="js/utilities.js"></script>
  <script type="text/javascript" src="js/symbols.js"></script>
  <script type="text/javascript" src="js/modules.js"></script>
  <script type="text/javascript" src="js/quicksearch.js"></script>
  <script type="text/javascript" src="js/treeview.js"></script>
  <script type="text/javascript" src="js/navigation.js"></script>
</head>
<body id="tango.io.selector.SelectSelector">
<div id="kandil-content">
<div class="module">
  <h1 class="module" id="m-tango.io.selector.SelectSelector"><a href="htmlsrc/tango.io.selector.SelectSelector.html" class="symbol">tango.io.selector.SelectSelector</a></h1>

<p class="sec_header">License:</p><div class="cmnt">BSD style: see <a href="http://www.dsource.org/projects/tango/wiki/LibraryLicense">license.txt</a></div>
<p class="sec_header">Author:</p><div class="cmnt">Juan Jose Comellas &lt;<a href="mailto:juanjo@comellas.com.ar">juanjo@comellas.com.ar</a>&gt;</div>
<dl>
<dt class="decl"><span class="kw">class</span> <a class="symbol _class" name="SelectSelector" href="htmlsrc/tango.io.selector.SelectSelector.html#L90">SelectSelector</a> : <span class="bclass">AbstractSelector</span> <span class="attrs">[<span class="prot">public</span>]</span> <a href="tango.io.selector.SelectSelector.html#SelectSelector" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Selector that uses the select() system call to receive I/O events for
 the registered conduits. To use this class you would normally do
 something like this:</div></div>
<p class="sec_header">Examples:</p><div class="cmnt"><table class="d_code">
  <tr><td class="d_codelines">
<pre><a href="#L1_ex1" name="L1_ex1">1</a>
<a href="#L2_ex1" name="L2_ex1">2</a>
<a href="#L3_ex1" name="L3_ex1">3</a>
<a href="#L4_ex1" name="L4_ex1">4</a>
<a href="#L5_ex1" name="L5_ex1">5</a>
<a href="#L6_ex1" name="L6_ex1">6</a>
<a href="#L7_ex1" name="L7_ex1">7</a>
<a href="#L8_ex1" name="L8_ex1">8</a>
<a href="#L9_ex1" name="L9_ex1">9</a>
<a href="#L10_ex1" name="L10_ex1">10</a>
<a href="#L11_ex1" name="L11_ex1">11</a>
<a href="#L12_ex1" name="L12_ex1">12</a>
<a href="#L13_ex1" name="L13_ex1">13</a>
<a href="#L14_ex1" name="L14_ex1">14</a>
<a href="#L15_ex1" name="L15_ex1">15</a>
<a href="#L16_ex1" name="L16_ex1">16</a>
<a href="#L17_ex1" name="L17_ex1">17</a>
<a href="#L18_ex1" name="L18_ex1">18</a>
<a href="#L19_ex1" name="L19_ex1">19</a>
<a href="#L20_ex1" name="L20_ex1">20</a>
<a href="#L21_ex1" name="L21_ex1">21</a>
<a href="#L22_ex1" name="L22_ex1">22</a>
<a href="#L23_ex1" name="L23_ex1">23</a>
<a href="#L24_ex1" name="L24_ex1">24</a>
<a href="#L25_ex1" name="L25_ex1">25</a>
<a href="#L26_ex1" name="L26_ex1">26</a>
<a href="#L27_ex1" name="L27_ex1">27</a>
<a href="#L28_ex1" name="L28_ex1">28</a>
<a href="#L29_ex1" name="L29_ex1">29</a>
<a href="#L30_ex1" name="L30_ex1">30</a>
</pre></td><td class="d_codetext"><pre>
<span class="k">import</span> <span class="i">tango</span>.<span class="i">io</span>.<span class="i">selector</span>.<span class="i">SelectSelector</span>;

<span class="i">Socket</span> <span class="i">socket</span>;
<span class="i">ISelector</span> <span class="i">selector</span> = <span class="k">new</span> <span class="i">SelectSelector</span>();

<span class="i">selector</span>.<span class="i">open</span>(<span class="n">100</span>, <span class="n">10</span>);

<span class="lc">// Register to read from socket</span>
<span class="i">selector</span>.<span class="i">register</span>(<span class="i">socket</span>, <span class="i">Event</span>.<span class="i">Read</span>);

<span class="k">int</span> <span class="i">eventCount</span> = <span class="i">selector</span>.<span class="i">select</span>(<span class="n">0.1</span>); <span class="lc">// 0.1 seconds</span>
<span class="k">if</span> (<span class="i">eventCount</span> &gt; <span class="n">0</span>)
{
    <span class="lc">// We can now read from the socket</span>
    <span class="i">socket</span>.<span class="i">read</span>();
}
<span class="k">else</span> <span class="k">if</span> (<span class="i">eventCount</span> == <span class="n">0</span>)
{
    <span class="lc">// Timeout</span>
}
<span class="k">else</span> <span class="k">if</span> (<span class="i">eventCount</span> == -<span class="n">1</span>)
{
    <span class="lc">// Another thread called the wakeup() method.</span>
}
<span class="k">else</span>
{
    <span class="lc">// Error: should never happen.</span>
}

<span class="i">selector</span>.<span class="i">close</span>();</pre>
</td></tr>
</table></div>
<dl>
<dt class="decl"><span class="kw">alias</span> AbstractSelector.select <a class="symbol _alias" name="SelectSelector.select" href="htmlsrc/tango.io.selector.SelectSelector.html#L96">select</a> <a href="tango.io.selector.SelectSelector.html#SelectSelector.select" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Alias for the select() method as we're not reimplementing it in
 this class.</div></div></dd>
<dt class="decl">uint <a class="symbol _variable" name="SelectSelector.DefaultSize" href="htmlsrc/tango.io.selector.SelectSelector.html#L115">DefaultSize</a> <span class="attrs">[<span class="prot">public</span>, <span class="stc">const</span>]</span> <a href="tango.io.selector.SelectSelector.html#SelectSelector.DefaultSize" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Default number of SelectionKey's that will be handled by the
 SelectSelector.</div></div></dd>
<dt class="decl"><span class="rettyp">void</span> <a class="symbol _function" name="SelectSelector.open" href="htmlsrc/tango.io.selector.SelectSelector.html#L136">open</a><span class="params">(uint <em>size</em> = <span class="defval"><span class="i">DefaultSize</span></span>, uint <em>maxEvents</em> = <span class="defval"><span class="i">DefaultSize</span></span>)</span> <span class="attrs">[<span class="prot">public</span>, <span class="stc">override</span>]</span> <a href="tango.io.selector.SelectSelector.html#SelectSelector.open" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Open the select()-based selector.</div></div>
<p class="sec_header">Parameters:</p>
<table class="params">
<tr><td><em>size</em></td><td>maximum amount of conduits that will be registered;
                it will grow dynamically if needed.</td></tr>
<tr><td><em>maxEvents</em></td><td>maximum amount of conduit events that will be
                returned in the selection set per call to select();
                this value is currently not used by this selector.</td></tr></table></dd>
<dt class="decl"><span class="rettyp">void</span> <a class="symbol _function" name="SelectSelector.close" href="htmlsrc/tango.io.selector.SelectSelector.html#L152">close</a><span class="params">()</span> <span class="attrs">[<span class="prot">public</span>, <span class="stc">override</span>]</span> <a href="tango.io.selector.SelectSelector.html#SelectSelector.close" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Close the selector.</div></div>
<p class="sec_header">Remarks:</p><div class="cmnt">It can be called multiple times without harmful side-effects.</div></dd>
<dt class="decl"><span class="rettyp">void</span> <a class="symbol _function" name="SelectSelector.register" href="htmlsrc/tango.io.selector.SelectSelector.html#L197">register</a><span class="params">(ISelectable <em>conduit</em>, Event <em>events</em>, Object <em>attachment</em> = <span class="defval"><span class="k">null</span></span>)</span> <span class="attrs">[<span class="prot">public</span>, <span class="stc">override</span>]</span> <a href="tango.io.selector.SelectSelector.html#SelectSelector.register" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Associate a conduit to the selector and track specific I/O events.
 If a conduit is already associated with the selector, the events and
 attachment are upated.</div></div>
<p class="sec_header">Parameters:</p>
<table class="params">
<tr><td><em>conduit</em></td><td>conduit that will be associated to the selector;
                must be a valid conduit (i.e. not null and open).</td></tr>
<tr><td><em>events</em></td><td>bit mask of Event values that represent the events
                that will be tracked for the conduit.</td></tr>
<tr><td><em>attachment</em></td><td>optional object with application-specific data that
                will be available when an event is triggered for the
                conduit</td></tr></table>
<p class="sec_header">Throws:</p><div class="cmnt">RegisteredConduitException if the conduit had already been
 registered to the selector.</div>
<p class="sec_header">Examples:</p><div class="cmnt"><table class="d_code">
  <tr><td class="d_codelines">
<pre><a href="#L1_ex2" name="L1_ex2">1</a>
</pre></td><td class="d_codetext"><pre>
<span class="i">selector</span>.<span class="i">register</span>(<span class="i">conduit</span>, <span class="i">Event</span>.<span class="i">Read</span> | <span class="i">Event</span>.<span class="i">Write</span>, <span class="i">object</span>);</pre>
</td></tr>
</table></div></dd>
<dt class="decl"><span class="rettyp">void</span> <a class="symbol _function" name="SelectSelector.unregister" href="htmlsrc/tango.io.selector.SelectSelector.html#L292">unregister</a><span class="params">(ISelectable <em>conduit</em>)</span> <span class="attrs">[<span class="prot">public</span>, <span class="stc">override</span>]</span> <a href="tango.io.selector.SelectSelector.html#SelectSelector.unregister" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Remove a conduit from the selector.</div></div>
<p class="sec_header">Parameters:</p>
<table class="params">
<tr><td><em>conduit</em></td><td>conduit that had been previously associated to the
                selector; it can be null.</td></tr></table>
<p class="sec_header">Remarks:</p><div class="cmnt">Unregistering a null conduit is allowed and no exception is thrown
 if this happens.</div>
<p class="sec_header">Throws:</p><div class="cmnt">UnregisteredConduitException if the conduit had not been previously
 registered to the selector.</div></dd>
<dt class="decl"><span class="rettyp">int</span> <a class="symbol _function" name="SelectSelector.select:2" href="htmlsrc/tango.io.selector.SelectSelector.html#L370">select</a><span class="params">(TimeSpan <em>timeout</em>)</span> <span class="attrs">[<span class="prot">public</span>, <span class="stc">override</span>]</span> <a href="tango.io.selector.SelectSelector.html#SelectSelector.select:2" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Wait for I/O events from the registered conduits for a specified
 amount of time.</div></div>
<p class="sec_header">Parameters:</p>
<table class="params">
<tr><td><em>timeout</em></td><td>TimeSpan with the maximum amount of time that the
            selector will wait for events from the conduits; the
            amount of time is relative to the current system time
            (i.e. just the number of milliseconds that the selector
            has to wait for the events).</td></tr></table>
<p class="sec_header">Returns:</p><div class="cmnt">The amount of conduits that have received events; 0 if no conduits
 have received events within the specified timeout; and -1 if the
 wakeup() method has been called from another thread.</div>
<p class="sec_header">Throws:</p><div class="cmnt">InterruptedSystemCallException if the underlying system call was
 interrupted by a signal and the 'restartInterruptedSystemCall'
 property was set to false; SelectorException if there were no
 resources available to wait for events from the conduits.</div></dd>
<dt class="decl"><span class="rettyp">ISelectionSet</span> <a class="symbol _function" name="SelectSelector.selectedSet" href="htmlsrc/tango.io.selector.SelectSelector.html#L473">selectedSet</a><span class="params">()</span> <span class="attrs">[<span class="prot">public</span>, <span class="stc">override</span>]</span> <a href="tango.io.selector.SelectSelector.html#SelectSelector.selectedSet" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Return the selection set resulting from the call to any of the
 select() methods.</div></div>
<p class="sec_header">Remarks:</p><div class="cmnt">If the call to select() was unsuccessful or it did not return any
 events, the returned value will be null.</div></dd>
<dt class="decl"><span class="rettyp">SelectionKey</span> <a class="symbol _function" name="SelectSelector.key" href="htmlsrc/tango.io.selector.SelectSelector.html#L487">key</a><span class="params">(ISelectable <em>conduit</em>)</span> <span class="attrs">[<span class="prot">public</span>, <span class="stc">override</span>]</span> <a href="tango.io.selector.SelectSelector.html#SelectSelector.key" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Return the selection key resulting from the registration of a
 conduit to the selector.</div></div>
<p class="sec_header">Remarks:</p><div class="cmnt">If the conduit is not registered to the selector the returned
 value will be null. No exception will be thrown by this method.</div></dd>
<dt class="decl"><span class="rettyp">size_t</span> <a class="symbol _function" name="SelectSelector.count" href="htmlsrc/tango.io.selector.SelectSelector.html#L503">count</a><span class="params">()</span> <span class="attrs">[<span class="prot">public</span>, <span class="stc">override</span>]</span> <a href="tango.io.selector.SelectSelector.html#SelectSelector.count" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Return the number of keys resulting from the registration of a conduit
 to the selector.</div></div></dd>
<dt class="decl"><span class="rettyp">int</span> <a class="symbol _function" name="SelectSelector.opApply" href="htmlsrc/tango.io.selector.SelectSelector.html#L513">opApply</a><span class="params">(<span class="k">scope</span> int delegate(ref SelectionKey) <em>dg</em>)</span> <a href="tango.io.selector.SelectSelector.html#SelectSelector.opApply" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Iterate through the currently registered selection keys.  Note that
 you should not erase or add any items from the selector while
 iterating, although you can register existing conduits again.</div></div></dd></dl></dd></dl>
</div>
<div id="kandil-footer">
  <p>Copyright (c) 2006 Juan Jose Comellas. All rights reserved</p>
  <p>Page generated by <a href="http://code.google.com/p/dil">DIL</a> on Mon May  7 18:12:25 2012. Rendered by <a href="http://code.google.com/p/dil/wiki/Kandil">Kandil</a>.</p>
</div>
</div>
</body>
</html>