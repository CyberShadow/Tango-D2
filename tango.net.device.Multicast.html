<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>tango.net.device.Multicast</title>
  <link href="css/style.css" rel="stylesheet" type="text/css"/>
  <!-- no favicon -->
  <script type="text/javascript" src="js/jquery.js"></script>
  <script type="text/javascript" src="js/utilities.js"></script>
  <script type="text/javascript" src="js/symbols.js"></script>
  <script type="text/javascript" src="js/modules.js"></script>
  <script type="text/javascript" src="js/quicksearch.js"></script>
  <script type="text/javascript" src="js/treeview.js"></script>
  <script type="text/javascript" src="js/navigation.js"></script>
</head>
<body id="tango.net.device.Multicast">
<div id="kandil-content">
<div class="module">
  <h1 class="module" id="m-tango.net.device.Multicast"><a href="htmlsrc/tango.net.device.Multicast.html" class="symbol">tango.net.device.Multicast</a></h1>

<p class="sec_header">License:</p><div class="cmnt">BSD style: see <a href="http://www.dsource.org/projects/tango/wiki/LibraryLicense">license.txt</a></div>
<p class="sec_header">Version:</p><div class="cmnt">Jun 2004 : Initial release</div>
<p class="sec_header">Version:</p><div class="cmnt">Dec 2006 : South pacific version</div>
<p class="sec_header">Author:</p><div class="cmnt">Kris</div>
<dl>
<dt class="decl"><span class="kw">class</span> <a class="symbol _class" name="Multicast" href="htmlsrc/tango.net.device.Multicast.html#L55">Multicast</a> : <span class="bclass">Datagram</span> <a href="tango.net.device.Multicast.html#Multicast" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">MulticastConduit sends and receives data on a multicast group, as
        described by a class-D address. To send data, the recipient group
        should be handed to the write() method. To receive, the socket is
        bound to an available local adapter/port as a listener and must
        join() the group before it becomes eligible for input from there.</div></div>
<div class="cmnt">While MulticastConduit is a flavour of datagram, it doesn't support
        being connected to a specific endpoint.
<p class="bl"></p>
        Sending and receiving via a multicast group:
        <table class="d_code">
  <tr><td class="d_codelines">
<pre><a href="#L1_ex1" name="L1_ex1">1</a>
<a href="#L2_ex1" name="L2_ex1">2</a>
<a href="#L3_ex1" name="L3_ex1">3</a>
<a href="#L4_ex1" name="L4_ex1">4</a>
<a href="#L5_ex1" name="L5_ex1">5</a>
<a href="#L6_ex1" name="L6_ex1">6</a>
<a href="#L7_ex1" name="L7_ex1">7</a>
<a href="#L8_ex1" name="L8_ex1">8</a>
<a href="#L9_ex1" name="L9_ex1">9</a>
<a href="#L10_ex1" name="L10_ex1">10</a>
<a href="#L11_ex1" name="L11_ex1">11</a>
</pre></td><td class="d_codetext"><pre>
<span class="k">auto</span> <span class="i">group</span> = <span class="k">new</span> <span class="i">InternetAddress</span> (<span class="sl">"225.0.0.10"</span>, <span class="n">8080</span>);

<span class="lc">// listen for datagrams on the group address (via port 8080)</span>
<span class="k">auto</span> <span class="i">multi</span> = <span class="k">new</span> <span class="i">MulticastConduit</span> (<span class="i">group</span>);

<span class="lc">// join and broadcast to the group</span>
<span class="i">multi</span>.<span class="i">join</span>.<span class="i">write</span> (<span class="sl">"hello"</span>, <span class="i">group</span>);

<span class="lc">// we are listening also ...</span>
<span class="k">char</span>[<span class="n">8</span>] <span class="i">tmp</span>;
<span class="k">auto</span> <span class="i">bytes</span> = <span class="i">multi</span>.<span class="i">read</span> (<span class="i">tmp</span>);</pre>
</td></tr>
</table>
<p class="bl"></p>
        Note that this example is expecting to receive its own broadcast;
        thus it may be necessary to enable loopback operation (see below)
        for successful receipt of the broadcast.
<p class="bl"></p>
        Note that class D addresses range from 225.0.0.0 to 239.255.255.255</div>
<p class="sec_header">see:</p><div class="cmnt">http://www.kohala.com/start/mcast.api.txt</div>
<dl>
<dt class="decl"><a class="symbol _ctor" name="Multicast.this" href="htmlsrc/tango.net.device.Multicast.html#L67">this</a><span class="params">()</span> <a href="tango.net.device.Multicast.html#Multicast.this" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Create a writable multicast socket</div></div></dd>
<dt class="decl"><a class="symbol _ctor" name="Multicast.this:2" href="htmlsrc/tango.net.device.Multicast.html#L94">this</a><span class="params">(InternetAddress <em>group</em>, bool <em>reuse</em> = <span class="defval"><span class="k">false</span></span>)</span> <a href="tango.net.device.Multicast.html#Multicast.this:2" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Create a read/write multicast socket</div></div>
<div class="cmnt">This flavour is necessary only for a multicast receiver
                (e.g. use this ctor in conjunction with SocketListener).
<p class="bl"></p>
                You should specify both a group address and a port to 
                listen upon. The resultant socket will be bound to the
                specified port (locally), and listening on the class-D
                address. Expect this to fail without a network adapter
                present, as bind() will not find anything to work with.
<p class="bl"></p>
                The reuse parameter dictates how to behave when the port
                is already in use. Default behaviour is to throw an IO
                exception, and the alternate is to force usage.
                
                To become eligible for incoming group datagrams, you must
                also invoke the join() method</div></dd>
<dt class="decl"><span class="rettyp">Multicast</span> <a class="symbol _function" name="Multicast.loopback" href="htmlsrc/tango.net.device.Multicast.html#L119">loopback</a><span class="params">(bool <em>yes</em> = <span class="defval"><span class="k">true</span></span>)</span> <a href="tango.net.device.Multicast.html#Multicast.loopback" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Enable/disable the receipt of multicast packets sent
                from the same adapter. The default state is OS specific</div></div></dd>
<dt class="decl"><span class="rettyp">Multicast</span> <a class="symbol _function" name="Multicast.ttl" href="htmlsrc/tango.net.device.Multicast.html#L141">ttl</a><span class="params">(uint <em>value</em> = <span class="defval"><span class="i">Subnet</span></span>)</span> <a href="tango.net.device.Multicast.html#Multicast.ttl" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Set the number of hops (time to live) of this socket. 
                Convenient values are
                <table class="d_code">
  <tr><td class="d_codelines">
<pre><a href="#L1_ex2" name="L1_ex2">1</a>
<a href="#L2_ex2" name="L2_ex2">2</a>
<a href="#L3_ex2" name="L3_ex2">3</a>
<a href="#L4_ex2" name="L4_ex2">4</a>
<a href="#L5_ex2" name="L5_ex2">5</a>
<a href="#L6_ex2" name="L6_ex2">6</a>
</pre></td><td class="d_codetext"><pre>
<span class="i">Host</span>:           <span class="i">packets</span> <span class="i">are</span> <span class="i">restricted</span> <span class="i">to</span> <span class="i">the</span> <span class="i">same</span> <span class="i">host</span>
<span class="i">Subnet</span>:         <span class="i">packets</span> <span class="i">are</span> <span class="i">restricted</span> <span class="i">to</span> <span class="i">the</span> <span class="i">same</span> <span class="i">subnet</span>
<span class="i">Site</span>:           <span class="i">packets</span> <span class="i">are</span> <span class="i">restricted</span> <span class="i">to</span> <span class="i">the</span> <span class="i">same</span> <span class="i">site</span>
<span class="i">Region</span>:         <span class="i">packets</span> <span class="i">are</span> <span class="i">restricted</span> <span class="i">to</span> <span class="i">the</span> <span class="i">same</span> <span class="i">region</span>
<span class="i">Continent</span>:      <span class="i">packets</span> <span class="i">are</span> <span class="i">restricted</span> <span class="i">to</span> <span class="i">the</span> <span class="i">same</span> <span class="i">continent</span>
<span class="i">Unrestricted</span>:   <span class="i">packets</span> <span class="i">are</span> <span class="i">unrestricted</span> <span class="k">in</span> <span class="k">scope</span></pre>
</td></tr>
</table></div></div></dd>
<dt class="decl"><span class="rettyp">Multicast</span> <a class="symbol _function" name="Multicast.join" href="htmlsrc/tango.net.device.Multicast.html#L154">join</a><span class="params">()</span> <a href="tango.net.device.Multicast.html#Multicast.join" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Add this socket to the listening group</div></div></dd>
<dt class="decl"><span class="rettyp">Multicast</span> <a class="symbol _function" name="Multicast.leave" href="htmlsrc/tango.net.device.Multicast.html#L166">leave</a><span class="params">()</span> <a href="tango.net.device.Multicast.html#Multicast.leave" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Remove this socket from the listening group</div></div></dd></dl></dd></dl>
</div>
<div id="kandil-footer">
  <p>Copyright (c) 2004 Kris Bell. All rights reserved</p>
  <p>Page generated by <a href="http://code.google.com/p/dil">dil</a> on Mon Mar 12 22:46:13 2012. Rendered by <a href="http://code.google.com/p/dil/wiki/Kandil">kandil</a>.</p>
</div>
</div>
</body>
</html>