<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>tango.io.stream.Zlib</title>
  <link href="css/style.css" rel="stylesheet" type="text/css"/>
  <!-- no favicon -->
  <script type="text/javascript" src="js/jquery.js"></script>
  <script type="text/javascript" src="js/utilities.js"></script>
  <script type="text/javascript" src="js/symbols.js"></script>
  <script type="text/javascript" src="js/modules.js"></script>
  <script type="text/javascript" src="js/quicksearch.js"></script>
  <script type="text/javascript" src="js/treeview.js"></script>
  <script type="text/javascript" src="js/navigation.js"></script>
</head>
<body id="tango.io.stream.Zlib">
<div id="kandil-content">
<div class="module">
  <h1 class="module" id="m-tango.io.stream.Zlib"><a href="htmlsrc/tango.io.stream.Zlib.html" class="symbol">tango.io.stream.Zlib</a></h1>

<p class="sec_header">License:</p><div class="cmnt">BSD style: see <a href="http://www.dsource.org/projects/tango/wiki/LibraryLicense">license.txt</a></div>
<p class="sec_header">Author:</p><div class="cmnt">Daniel Keep</div>
<p class="sec_header">Version:</p><div class="cmnt">Feb 08: Added support for different stream encodings, removed
              old "window bits" ctors.<br/>
      Dec 07: Added support for "window bits", needed for Zip support.<br/>
      Jul 07: Initial release.</div>
<dl>
<dt class="decl"><span class="kw">class</span> <a class="symbol _class" name="ZlibInput" href="htmlsrc/tango.io.stream.Zlib.html#L57">ZlibInput</a> : <span class="bclass">InputFilter</span> <a href="tango.io.stream.Zlib.html#ZlibInput" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">This input filter can be used to perform decompression of zlib streams.</div></div>
<dl>
<dt class="decl"><span class="kw">enum</span> <a class="symbol _enum" name="ZlibInput.Encoding" href="htmlsrc/tango.io.stream.Zlib.html#L66">Encoding</a> : int <a href="tango.io.stream.Zlib.html#ZlibInput.Encoding" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">This enumeration allows you to specify the encoding of the compressed
        stream.</div></div>
<dl>
<dt class="decl"><a class="symbol _enummem" name="ZlibInput.Encoding.Guess" href="htmlsrc/tango.io.stream.Zlib.html#L73">Guess</a> <a href="tango.io.stream.Zlib.html#ZlibInput.Encoding.Guess" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">The code should attempt to automatically determine what the encoding
  of the stream should be.  Note that this cannot detect the case
  where the stream was compressed with no encoding.</div></div></dd>
<dt class="decl"><a class="symbol _enummem" name="ZlibInput.Encoding.Zlib" href="htmlsrc/tango.io.stream.Zlib.html#L77">Zlib</a> <a href="tango.io.stream.Zlib.html#ZlibInput.Encoding.Zlib" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Stream has zlib encoding.</div></div></dd>
<dt class="decl"><a class="symbol _enummem" name="ZlibInput.Encoding.Gzip" href="htmlsrc/tango.io.stream.Zlib.html#L81">Gzip</a> <a href="tango.io.stream.Zlib.html#ZlibInput.Encoding.Gzip" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Stream has gzip encoding.</div></div></dd>
<dt class="decl"><a class="symbol _enummem" name="ZlibInput.Encoding.None" href="htmlsrc/tango.io.stream.Zlib.html#L85">None</a> <a href="tango.io.stream.Zlib.html#ZlibInput.Encoding.None" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Stream has no encoding.</div></div></dd></dl></dd>
<dt class="decl"><a class="symbol _ctor" name="ZlibInput.this" href="htmlsrc/tango.io.stream.Zlib.html#L130">this</a><span class="params">(InputStream <em>stream</em>, Encoding <em>encoding</em>, int <em>windowBits</em> = <span class="defval"><span class="i">WINDOWBITS_DEFAULT</span></span>)</span> <a href="tango.io.stream.Zlib.html#ZlibInput.this" class="plink">¶</a></dt>
<dt class="decl"><a class="symbol _ctor" name="ZlibInput.this:2" href="htmlsrc/tango.io.stream.Zlib.html#L141">this</a><span class="params">(InputStream <em>stream</em>)</span> <a href="tango.io.stream.Zlib.html#ZlibInput.this:2" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Constructs a new zlib decompression filter.  You need to pass in the
        stream that the decompression filter will read from.  If you are using
        this filter with a conduit, the idiom to use is:</div></div>
<div class="cmnt"><table class="d_code">
  <tr><td class="d_codelines">
<pre><a href="#L1_ex1" name="L1_ex1">1</a>
<a href="#L2_ex1" name="L2_ex1">2</a>
</pre></td><td class="d_codetext"><pre>
<span class="k">auto</span> <span class="i">input</span> = <span class="k">new</span> <span class="i">ZlibInput</span>(<span class="i">myConduit</span>.<span class="i">input</span>));
<span class="i">input</span>.<span class="i">read</span>(<span class="i">myContent</span>);</pre>
</td></tr>
</table>
<p class="bl"></p>
        The optional windowBits parameter is the base two logarithm of the
        window size, and should be in the range 8-15, defaulting to 15 if not
        specified.  Additionally, the windowBits parameter may be negative to
        indicate that zlib should omit the standard zlib header and trailer,
        with the window size being -windowBits.</div>
<p class="sec_header">Parameters:</p>
<table class="params">
<tr><td><em>stream</em></td><td>Compressed input stream.</td></tr>
<tr><td><em>encoding</em></td><td>Stream encoding.  Defaults to Encoding.Guess, which
            should be sufficient unless the stream was compressed with
            no encoding; in this case, you must manually specify
            Encoding.None.</td></tr>
<tr><td><em>windowBits</em></td><td>The base two logarithm of the window size, and should be in the
            range 8-15, defaulting to 15 if not specified.</td></tr></table></dd>
<dt class="decl"><span class="rettyp">void</span> <a class="symbol _function" name="ZlibInput.reset" href="htmlsrc/tango.io.stream.Zlib.html#L254">reset</a><span class="params">(InputStream <em>stream</em>, Encoding <em>encoding</em>, int <em>windowBits</em> = <span class="defval"><span class="i">WINDOWBITS_DEFAULT</span></span>)</span> <a href="tango.io.stream.Zlib.html#ZlibInput.reset" class="plink">¶</a></dt>
<dt class="decl"><span class="rettyp">void</span> <a class="symbol _function" name="ZlibInput.reset:2" href="htmlsrc/tango.io.stream.Zlib.html#L266">reset</a><span class="params">(InputStream <em>stream</em>)</span> <a href="tango.io.stream.Zlib.html#ZlibInput.reset:2" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Resets and re-initialises this instance.</div></div>
<div class="cmnt">If you are creating compression streams inside a loop, you may wish to
        use this method to re-use a single instance.  This prevents the
        potentially costly re-allocation of internal buffers.
<p class="bl"></p>
        The stream must have already been closed before calling reset.</div></dd>
<dt class="decl"><span class="rettyp">size_t</span> <a class="symbol _function" name="ZlibInput.read" href="htmlsrc/tango.io.stream.Zlib.html#L280">read</a><span class="params">(void[] <em>dst</em>)</span> <span class="attrs">[<span class="stc">override</span>]</span> <a href="tango.io.stream.Zlib.html#ZlibInput.read" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Decompresses data from the underlying conduit into a target array.</div></div>
<div class="cmnt">Returns the number of bytes stored into dst, which may be less than
        requested.</div></dd>
<dt class="decl"><span class="rettyp">void</span> <a class="symbol _function" name="ZlibInput.close" href="htmlsrc/tango.io.stream.Zlib.html#L330">close</a><span class="params">()</span> <span class="attrs">[<span class="stc">override</span>]</span> <a href="tango.io.stream.Zlib.html#ZlibInput.close" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Closes the compression stream.</div></div></dd></dl></dd>
<dt class="decl"><span class="kw">class</span> <a class="symbol _class" name="ZlibOutput" href="htmlsrc/tango.io.stream.Zlib.html#L372">ZlibOutput</a> : <span class="bclass">OutputFilter</span> <a href="tango.io.stream.Zlib.html#ZlibOutput" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">This output filter can be used to perform compression of data into a zlib
    stream.</div></div>
<dl>
<dt class="decl"><span class="kw">enum</span> <a class="symbol _enum" name="ZlibOutput.Level" href="htmlsrc/tango.io.stream.Zlib.html#L384">Level</a> : int <a href="tango.io.stream.Zlib.html#ZlibOutput.Level" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">This enumeration represents several pre-defined compression levels.</div></div>
<div class="cmnt">Any integer between -1 and 9 inclusive may be used as a level,
        although the symbols in this enumeration should suffice for most
        use-cases.</div>
<dl>
<dt class="decl"><a class="symbol _enummem" name="ZlibOutput.Level.Normal" href="htmlsrc/tango.io.stream.Zlib.html#L392">Normal</a> <a href="tango.io.stream.Zlib.html#ZlibOutput.Level.Normal" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Default compression level.  This is selected for a good compromise
 between speed and compression, and the exact compression level is
 determined by the underlying zlib library.  Should be roughly
 equivalent to compression level 6.</div></div></dd>
<dt class="decl"><a class="symbol _enummem" name="ZlibOutput.Level.None" href="htmlsrc/tango.io.stream.Zlib.html#L397">None</a> <a href="tango.io.stream.Zlib.html#ZlibOutput.Level.None" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Do not perform compression.  This will cause the stream to expand
 slightly to accommodate stream metadata.</div></div></dd>
<dt class="decl"><a class="symbol _enummem" name="ZlibOutput.Level.Fast" href="htmlsrc/tango.io.stream.Zlib.html#L402">Fast</a> <a href="tango.io.stream.Zlib.html#ZlibOutput.Level.Fast" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Minimal compression; the fastest level which performs at least
 some compression.</div></div></dd>
<dt class="decl"><a class="symbol _enummem" name="ZlibOutput.Level.Best" href="htmlsrc/tango.io.stream.Zlib.html#L406">Best</a> <a href="tango.io.stream.Zlib.html#ZlibOutput.Level.Best" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Maximal compression.</div></div></dd></dl></dd>
<dt class="decl"><span class="kw">enum</span> <a class="symbol _enum" name="ZlibOutput.Encoding" href="htmlsrc/tango.io.stream.Zlib.html#L416">Encoding</a> : int <a href="tango.io.stream.Zlib.html#ZlibOutput.Encoding" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">This enumeration allows you to specify what the encoding of the
        compressed stream should be.</div></div>
<dl>
<dt class="decl"><a class="symbol _enummem" name="ZlibOutput.Encoding.Zlib" href="htmlsrc/tango.io.stream.Zlib.html#L421">Zlib</a> <a href="tango.io.stream.Zlib.html#ZlibOutput.Encoding.Zlib" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Stream should use zlib encoding.</div></div></dd>
<dt class="decl"><a class="symbol _enummem" name="ZlibOutput.Encoding.Gzip" href="htmlsrc/tango.io.stream.Zlib.html#L425">Gzip</a> <a href="tango.io.stream.Zlib.html#ZlibOutput.Encoding.Gzip" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Stream should use gzip encoding.</div></div></dd>
<dt class="decl"><a class="symbol _enummem" name="ZlibOutput.Encoding.None" href="htmlsrc/tango.io.stream.Zlib.html#L429">None</a> <a href="tango.io.stream.Zlib.html#ZlibOutput.Encoding.None" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Stream should use no encoding.</div></div></dd></dl></dd>
<dt class="decl"><a class="symbol _ctor" name="ZlibOutput.this" href="htmlsrc/tango.io.stream.Zlib.html#L459">this</a><span class="params">(OutputStream <em>stream</em>, Level <em>level</em>, Encoding <em>encoding</em>, int <em>windowBits</em> = <span class="defval"><span class="i">WINDOWBITS_DEFAULT</span></span>)</span> <a href="tango.io.stream.Zlib.html#ZlibOutput.this" class="plink">¶</a></dt>
<dt class="decl"><a class="symbol _ctor" name="ZlibOutput.this:2" href="htmlsrc/tango.io.stream.Zlib.html#L470">this</a><span class="params">(OutputStream <em>stream</em>, Level <em>level</em> = <span class="defval"><span class="i">Normal</span></span>)</span> <a href="tango.io.stream.Zlib.html#ZlibOutput.this:2" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Constructs a new zlib compression filter.  You need to pass in the
        stream that the compression filter will write to.  If you are using
        this filter with a conduit, the idiom to use is:</div></div>
<div class="cmnt"><table class="d_code">
  <tr><td class="d_codelines">
<pre><a href="#L1_ex2" name="L1_ex2">1</a>
<a href="#L2_ex2" name="L2_ex2">2</a>
</pre></td><td class="d_codetext"><pre>
<span class="k">auto</span> <span class="i">output</span> = <span class="k">new</span> <span class="i">ZlibOutput</span>(<span class="i">myConduit</span>.<span class="i">output</span>);
<span class="i">output</span>.<span class="i">write</span>(<span class="i">myContent</span>);</pre>
</td></tr>
</table>
<p class="bl"></p>
        The optional windowBits parameter is the base two logarithm of the
        window size, and should be in the range 8-15, defaulting to 15 if not
        specified.  Additionally, the windowBits parameter may be negative to
        indicate that zlib should omit the standard zlib header and trailer,
        with the window size being -windowBits.</div></dd>
<dt class="decl"><span class="rettyp">void</span> <a class="symbol _function" name="ZlibOutput.reset" href="htmlsrc/tango.io.stream.Zlib.html#L570">reset</a><span class="params">(OutputStream <em>stream</em>, Level <em>level</em>, Encoding <em>encoding</em>, int <em>windowBits</em> = <span class="defval"><span class="i">WINDOWBITS_DEFAULT</span></span>)</span> <a href="tango.io.stream.Zlib.html#ZlibOutput.reset" class="plink">¶</a></dt>
<dt class="decl"><span class="rettyp">void</span> <a class="symbol _function" name="ZlibOutput.reset:2" href="htmlsrc/tango.io.stream.Zlib.html#L581">reset</a><span class="params">(OutputStream <em>stream</em>, Level <em>level</em> = <span class="defval"><span class="i">Normal</span></span>)</span> <a href="tango.io.stream.Zlib.html#ZlibOutput.reset:2" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Resets and re-initialises this instance.</div></div>
<div class="cmnt">If you are creating compression streams inside a loop, you may wish to
        use this method to re-use a single instance.  This prevents the
        potentially costly re-allocation of internal buffers.
<p class="bl"></p>
        The stream must have already been closed or committed before calling
        reset.</div></dd>
<dt class="decl"><span class="rettyp">size_t</span> <a class="symbol _function" name="ZlibOutput.write" href="htmlsrc/tango.io.stream.Zlib.html#L596">write</a><span class="params">(const(void)[] <em>src</em>)</span> <span class="attrs">[<span class="stc">override</span>]</span> <a href="tango.io.stream.Zlib.html#ZlibOutput.write" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Compresses the given data to the underlying conduit.</div></div>
<div class="cmnt">Returns the number of bytes from src that were compressed; write
        should always consume all data provided to it, although it may not be
        immediately written to the underlying output stream.</div></dd>
<dt class="decl"><span class="rettyp">size_t</span> <a class="symbol _function" name="ZlibOutput.written" href="htmlsrc/tango.io.stream.Zlib.html#L645">written</a><span class="params">()</span> <a href="tango.io.stream.Zlib.html#ZlibOutput.written" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">This read-only property returns the number of compressed bytes that
        have been written to the underlying stream.  Following a call to
        either close or commit, this will contain the total compressed size of
        the input data stream.</div></div></dd>
<dt class="decl"><span class="rettyp">void</span> <a class="symbol _function" name="ZlibOutput.close" href="htmlsrc/tango.io.stream.Zlib.html#L657">close</a><span class="params">()</span> <span class="attrs">[<span class="stc">override</span>]</span> <a href="tango.io.stream.Zlib.html#ZlibOutput.close" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Close the compression stream.  This will cause any buffered content to
        be committed to the underlying stream.</div></div></dd>
<dt class="decl"><span class="rettyp">void</span> <a class="symbol _function" name="ZlibOutput.commit" href="htmlsrc/tango.io.stream.Zlib.html#L677">commit</a><span class="params">()</span> <a href="tango.io.stream.Zlib.html#ZlibOutput.commit" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">Purge any buffered content.  Calling this will implicitly end the zlib
        stream, so it should not be called until you are finished compressing
        data.  Any calls to either write or commit after a compression filter
        has been committed will throw an exception.</div></div>
<div class="cmnt">The only difference between calling this method and calling close is
        that the underlying stream will not be closed.</div></dd></dl></dd>
<dt class="decl"><span class="kw">class</span> <a class="symbol _class" name="ZlibClosedException" href="htmlsrc/tango.io.stream.Zlib.html#L762">ZlibClosedException</a> : <span class="bclass">IOException</span> <a href="tango.io.stream.Zlib.html#ZlibClosedException" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">This exception is thrown if you attempt to perform a read, write or flush
    operation on a closed zlib filter stream.  This can occur if the input
    stream has finished, or an output stream was flushed.</div></div>
</dd>
<dt class="decl"><span class="kw">class</span> <a class="symbol _class" name="ZlibStillOpenException" href="htmlsrc/tango.io.stream.Zlib.html#L778">ZlibStillOpenException</a> : <span class="bclass">IOException</span> <a href="tango.io.stream.Zlib.html#ZlibStillOpenException" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">This exception is thrown if you attempt to reset a compression stream that
    is still open.  You must either close or commit a stream before it can be
    reset.</div></div>
</dd>
<dt class="decl"><span class="kw">class</span> <a class="symbol _class" name="ZlibException" href="htmlsrc/tango.io.stream.Zlib.html#L794">ZlibException</a> : <span class="bclass">IOException</span> <a href="tango.io.stream.Zlib.html#ZlibException" class="plink">¶</a></dt>
<dd class="ddef">
<div class="summary"><div class="cmnt">This exception is thrown when an error occurs in the underlying zlib
    library.  Where possible, it will indicate both the name of the error, and
    any textural message zlib has provided.</div></div>
</dd></dl>
</div>
<div id="kandil-footer">
  <p>Copyright (C) 2007 Daniel Keep.  All rights reserved.</p>
  <p>Page generated by <a href="http://code.google.com/p/dil">DIL</a> on Tue Aug 21 02:56:46 2012. Rendered by <a href="http://code.google.com/p/dil/wiki/Kandil">Kandil</a>.</p>
</div>
</div>
</body>
</html>